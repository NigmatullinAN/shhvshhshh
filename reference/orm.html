<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Work+Sans:500,600" rel="stylesheet">
  
    <title>ORM API &#8212; Документация odoo 13.0</title>
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/patchqueue.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/doc.js"></script>
    <script type="text/javascript" src="../_static/jquery.noconflict.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/patchqueue.js"></script><link rel="canonical" href="" />
  
    <link rel="index" title="Алфавитный указатель" href="../genindex.html" />
    <link rel="search" title="Поиск" href="../search.html" />
    <link rel="next" title="Data Files" href="data.html" />
    <link rel="prev" title="Reference" href="../reference.html" /> 
  </head><body><header class="o_main_header o_has_sub_nav o_inverted ">
    <div class="o_main_header_main">
      <a class="pull-left o_logo" href="/"></a>
      <a href="#" class="o_mobile_menu_toggle visible-xs-block pull-right">
        <span class="sr-only">Toggle navigation</span>
        <span class="mdi-navigation-menu"></span>
      </a>
      <div class="o_header_buttons">
        <a href="http://www.odoo.com/trial" class="btn btn-primary">Start Now</a>
      </div>
      <ul class="o_primary_nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle">Apps</a>
          <div class="dropdown-menu o_secondary_nav">
            <div class="container">
              <div class="row">
                <div class="col-sm-3 o_website_apps">
                  <div class="o_nav_app_family">
                    <span></span> Websites
                    <div>Build great user experience</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/website-builder">Website Builder</a></li>
                    <li><a href="https://www.odoo.com/page/e-commerce">eCommerce</a></li>
                    <li><a href="https://www.odoo.com/page/blog-engine">Blogs</a></li>
                    <li><a href="https://www.odoo.com/page/community-builder">Forums</a></li>
                    <li><a href="https://www.odoo.com/page/slides">Slides</a></li>
                    <li><a href="https://adspike.odoo.com">SEA</a></li>
                  </ul>
                </div>
                <div class="col-sm-3 o_sale_apps">
                  <div class="o_nav_app_family">
                    <span></span> Sales
                    <div>Boost your success rate</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/sales">Sales</a></li>
                    <li><a href="https://www.odoo.com/page/crm">CRM</a></li>
                    <li><a href="https://www.odoo.com/page/billing">Invoicing</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Point of Sale</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/point-of-sale">Shops</a></li>
                        <li><a href="https://www.odoo.com/page/pos-restaurant">Restaurants</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/subscriptions">Subscriptions</a></li>
                    <li><a href="https://www.odoo.com/page/sign">Sign</a></li>
                  </ul>
                </div>
                <div class="col-sm-3 o_operation_apps">
                  <div class="o_nav_app_family">
                    <span></span> Operations
                    <div>It's all about efficiency</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/accounting">Accounting</a></li>
                    <li><a href="https://www.odoo.com/page/project-management">Project</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Human Resources</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/recruitment">Recruitment</a></li>
                        <li><a href="https://www.odoo.com/page/employees">Employees</a></li>
                        <li><a href="https://www.odoo.com/page/expenses">Expenses</a></li>
                        <li><a href="https://www.odoo.com/page/appraisal">Appraisal</a></li>
                        <li><a href="https://www.odoo.com/page/fleet">Fleet</a></li>
                        <li><a href="https://www.odoo.com/page/leaves">Leaves</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/warehouse">Inventory</a></li>
                    <li><a href="https://www.odoo.com/page/purchase">Purchase</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Manufacturing</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/manufacturing">MRP</a></li>
                        <li><a href="https://www.odoo.com/page/plm">PLM</a></li>
                        <li><a href="https://www.odoo.com/page/maintenance">Maintenance</a></li>
                        <li><a href="https://www.odoo.com/page/quality">Quality</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
                <div class="col-sm-3 o_productivity_apps">
                  <div class="o_nav_app_family">
                    <span></span> Productivity Tools
                    <div>Great Tools = Happy People</div>
                  </div>
                  <ul>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Communication</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/discuss">Discuss</a></li>
                        <li><a href="https://www.odoo.com/page/discuss-groups">Mailing Lists</a></li>
                        <li><a href="https://www.odoo.com/page/notes">Notes</a></li>
                        <li><a href="#">Help desk</a></li>
                        <li><a href="#">Appointment</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/timesheet">Timesheet</a></li>
                    <li><a href="https://www.odoo.com/page/email-marketing">Email Marketing</a></li>
                    <li><a href="https://www.odoo.com/page/events">Events</a></li>
                    <li><a href="https://www.odoo.com/page/survey">Survey</a></li>
                    <li><a href="https://www.odoo.com/page/live-chat">Live Chat</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <a href="http://www.odoo.com/apps/modules" class="o_store_link"><i class="fa fa-cube fa-fw"></i> Third party apps</a>
          </div>
        </li>
        <li><a href="https://www.odoo.com/page/tour">Tour</a></li>
        <li><a href="https://www.odoo.com/pricing">Pricing</a></li>
        <li><a href="https://www.odoo.com/page/docs">Docs</a></li>
      </ul>
    </div>
    <nav class="navbar o_sub_nav">
      <div class="container">
        <div class="navbar-header visible-xs">
            <button type="button" class="navbar-toggle collapsed text-left btn-block" data-toggle="collapse" data-target="#o_sub-menu" aria-expanded="false">
              Navigate
              <span class="mdi-hardware-keyboard-arrow-down pull-right"></span>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="o_sub-menu">
          <ol class="o_breadcrumb breadcrumb nav navbar-left">
              
              





    
        
            <li><a href="../index.html">Developer Doc</a></li>
        
    
    <li class="active"><a href="#">ORM API</a></li>

              
          </ol>

          <div class="call-to-action navbar-right hidden-xs">
            <a href="http://www.odoo.com/trial" class="btn btn-primary">Start Now</a>
          </div>

          <ul class="navbar-nav navbar-right nav o_sub_nav_actions">
            
              <li class="divider"></li>
            

            
            


            
          </ul>

          <ul class="nav navbar-nav navbar-right">
            

            
            

<li><a href="https://www.odoo.com/documentation/user/13.0/index.html">User</a></li>
<li><a href="https://www.odoo.com/documentation/13.0/index.html">Developer</a></li>
<li><a href="https://www.odoo.com/documentation/13.0/setup/install.html">Installation</a></li>
<li><a href="https://odoo.com/slides">eLearning</a></li>
<li><a href="https://www.odoo.com/page/odoo-white-paper">White Papers</a></li>
<li><a href="https://www.odoo.com/page/legal">Legal</a></li>
            

            
          </ul>
        </div>
      </div>
    </nav>
  </header><div id="wrap" class="">
    
    
    
    <figure class="card top has_banner">
      <span class="card-img" style="background-image: url('../_static/banners/orm_api.jpg');"></span>
      <div class="container text-center">
        <h1> ORM API </h1>
      </div>
    </figure>
    
    
    
      <main class="container ">
        
        <div class="o_content row">
          
          <aside>
            <div class="navbar-aside text-center">
              <ul class="nav text-left list-group"><li class="list-group-item"><a href="#models" class="reference ripple internal">Models</a><ul ><li class="list-group-item"><a href="#abstractmodel" class="reference ripple internal">AbstractModel</a></li><li class="list-group-item"><a href="#model" class="reference ripple internal">Model</a></li><li class="list-group-item"><a href="#transientmodel" class="reference ripple internal">TransientModel</a></li></ul></li><li class="list-group-item"><a href="#fields" class="reference ripple internal">Fields</a><ul ><li class="list-group-item"><a href="#basic-fields" class="reference ripple internal">Basic Fields</a></li><li class="list-group-item"><a href="#advanced-fields" class="reference ripple internal">Advanced Fields</a><ul ><li class="list-group-item"><a href="#date-time-fields" class="reference ripple internal">Date(time) Fields</a></li><li class="list-group-item"><a href="#relational-fields" class="reference ripple internal">Relational Fields</a></li><li class="list-group-item"><a href="#pseudo-relational-fields" class="reference ripple internal">Pseudo-relational fields</a></li><li class="list-group-item"><a href="#computed-fields" class="reference ripple internal">Computed Fields</a></li><li class="list-group-item"><a href="#related-fields" class="reference ripple internal">Related fields</a></li></ul></li><li class="list-group-item"><a href="#automatic-fields" class="reference ripple internal">Automatic fields</a></li><li class="list-group-item"><a href="#reserved-field-names" class="reference ripple internal">Reserved Field names</a></li></ul></li><li class="list-group-item"><a href="#recordsets" class="reference ripple internal">Recordsets</a><ul ><li class="list-group-item"><a href="#field-access" class="reference ripple internal">Field access</a></li><li class="list-group-item"><a href="#record-cache-and-prefetching" class="reference ripple internal">Record cache and prefetching</a></li></ul></li><li class="list-group-item"><a href="#module-odoo.api" class="reference ripple internal">Method decorators</a></li><li class="list-group-item"><a href="#environment" class="reference ripple internal">Environment</a><ul ><li class="list-group-item"><a href="#altering-the-environment" class="reference ripple internal">Altering the environment</a></li><li class="list-group-item"><a href="#sql-execution" class="reference ripple internal">SQL Execution</a></li></ul></li><li class="list-group-item"><a href="#common-orm-methods" class="reference ripple internal">Common ORM methods</a><ul ><li class="list-group-item"><a href="#create-update" class="reference ripple internal">Create/update</a></li><li class="list-group-item"><a href="#search-read" class="reference ripple internal">Search/Read</a><ul ><li class="list-group-item"><a href="#fields-views" class="reference ripple internal">Fields/Views</a></li><li class="list-group-item"><a href="#search-domains" class="reference ripple internal">Search domains</a></li></ul></li><li class="list-group-item"><a href="#unlink" class="reference ripple internal">Unlink</a></li><li class="list-group-item"><a href="#record-set-information" class="reference ripple internal">Record(set) information</a></li><li class="list-group-item"><a href="#operations" class="reference ripple internal">Operations</a><ul ><li class="list-group-item"><a href="#filter" class="reference ripple internal">Filter</a></li><li class="list-group-item"><a href="#map" class="reference ripple internal">Map</a></li><li class="list-group-item"><a href="#sort" class="reference ripple internal">Sort</a></li></ul></li></ul></li><li class="list-group-item"><a href="#inheritance-and-extension" class="reference ripple internal">Inheritance and extension</a><ul ><li class="list-group-item"><a href="#classical-inheritance" class="reference ripple internal">Classical inheritance</a></li><li class="list-group-item"><a href="#extension" class="reference ripple internal">Extension</a></li><li class="list-group-item"><a href="#delegation" class="reference ripple internal">Delegation</a></li><li class="list-group-item"><a href="#fields-incremental-definition" class="reference ripple internal">Fields Incremental Definition</a></li></ul></li><li class="list-group-item"><a href="#module-odoo.exceptions" class="reference ripple internal">Error management</a></li></ul>
              
              <p class="gith-container"><a href="https://github.com/odoo/odoo/edit/13.0/doc/reference/orm.rst" class="gith-link">
                  Edit on GitHub
              </a></p>
              
            </div>
          </aside>
          
          <article class="doc-body ">
            
            
  <section id="module-odoo.models"><i id="orm-api"></i><i id="reference-orm"></i><dl ><dt >Object Relational Mapping module:</dt><dd ><ul ><li >Hierarchical structure</li><li >Constraints consistency and validation</li><li >Object metadata depends on its status</li><li >Optimised processing by complex query (multiple actions at once)</li><li >Default field values</li><li >Permissions optimisation</li><li >Persistent object: DB postgresql</li><li >Data conversion</li><li >Multi-level caching system</li><li >Two different inheritance mechanisms</li><li ><dl ><dt >Rich set of field types:</dt><dd ><ul ><li >classical (varchar, integer, boolean, …)</li><li >relational (one2many, many2one, many2many)</li><li >functional</li></ul></dd></dl></li></ul></dd></dl></section><section id="models"><i id="reference-orm-model"></i><i id="reference-orm-models"></i><h2 >Models</h2><p >Model fields are defined as attributes on the model itself:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">odoo</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">fields</span>
<span class="k">class</span> <span class="nc">AModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;a.model.name&#39;</span>

    <span class="n">field1</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">()</span>
</pre></div>
</div>
<div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >this means you cannot define a field and a method with the same
name, the last one will silently overwrite the former ones.</p></div><p >By default, the field’s label (user-visible name) is a capitalized version of
the field name, this can be overridden with the <code >string</code> parameter.</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">field2</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s2">&quot;Field Label&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >For the list of field types and parameters, see <a href="#reference-fields" class="reference internal"><span class="std-ref std">the fields reference</span></a>.</p><p >Default values are defined as parameters on fields, either as a value:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;a value&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >or as a function called to compute the default value, which should return that
value:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_default_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>

<span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_name</span><span class="p">())</span>
</pre></div>
</div>
<h3 >API</h3><section class="code-class"><h6 id="odoo.models.BaseModel"><code><em >class </em>odoo.models.BaseModel<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L239" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Base class for Odoo models.</p><p >Odoo models are created by inheriting one of the following:</p><ul ><li ><a href="#odoo.models.Model" title="odoo.models.Model" class="reference alert-link internal"><code class="xref py-class py">Model</code></a> for regular database-persisted models</li><li ><a href="#odoo.models.TransientModel" title="odoo.models.TransientModel" class="reference alert-link internal"><code class="xref py-class py">TransientModel</code></a> for temporary data, stored in the database but
automatically vacuumed every so often</li><li ><a href="#odoo.models.AbstractModel" title="odoo.models.AbstractModel" class="reference alert-link internal"><code class="xref py-class py">AbstractModel</code></a> for abstract super classes meant to be shared by
multiple inheriting models</li></ul><p >The system automatically instantiates every model once per database. Those
instances represent the available models on each database, and depend on
which modules are installed on that database. The actual class of each
instance is built from the Python classes that create and inherit from the
corresponding model.</p><p >Every model instance is a «recordset», i.e., an ordered collection of
records of the model. Recordsets are returned by methods like
<a href="#odoo.models.Model.browse" title="odoo.models.Model.browse" class="reference alert-link internal"><code class="py-meth xref py">browse()</code></a>, <a href="#odoo.models.Model.search" title="odoo.models.Model.search" class="reference alert-link internal"><code class="py-meth xref py">search()</code></a>, or field accesses. Records have no
explicit representation: a record is represented as a recordset of one
record.</p><p >To create a class that should not be instantiated,
the <a href="#odoo.models.BaseModel._register" title="odoo.models.BaseModel._register" class="reference alert-link internal"><code class="py-attr xref py">_register</code></a> attribute may be set to False.</p><section class="code-attribute"><h6 id="odoo.models.BaseModel._auto"><code>_auto<em > = False</em></code></h6><p >Whether a database table should be created (default: <code >True</code>).
If set to <code >False</code>, override <code class="py-meth xref py">init()</code>
to create the database table.</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Совет</h3><p >To create a model without any table, inherit
from <a href="#odoo.models.AbstractModel" title="odoo.models.AbstractModel" class="reference alert-link internal"><code class="xref py-class py">AbstractModel</code></a>.</p></div></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._table"><code>_table<em > = None</em></code></h6><p >SQL table name used by model if <a href="#odoo.models.BaseModel._auto" title="odoo.models.BaseModel._auto" class="reference alert-link internal"><code class="py-attr xref py">_auto</code></a></p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._sequence"><code>_sequence<em > = None</em></code></h6><p >SQL sequence to use for ID field</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._sql_constraints"><code>_sql_constraints<em > = []</em></code></h6><p >SQL constraints [(name, sql_def, message)]</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._register"><code>_register<em > = True</em></code></h6><p >not visible in ORM registry</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._name"><code>_name<em > = None</em></code></h6><p >the model name (in dot-notation, module namespace)</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._description"><code>_description<em > = None</em></code></h6><p >the model’s informal name</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._inherit"><code>_inherit<em > = None</em></code></h6><p >Python-inherited models:</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link">str</a> or <a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link">list</a>(<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link">str</a>)</div></div></div><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><ul ><li >If <a href="#odoo.models.BaseModel._name" title="odoo.models.BaseModel._name" class="reference alert-link internal"><code class="py-attr xref py">_name</code></a> is set, name(s) of parent models to inherit from</li><li >If <a href="#odoo.models.BaseModel._name" title="odoo.models.BaseModel._name" class="reference alert-link internal"><code class="py-attr xref py">_name</code></a> is unset, name of a single model to extend in-place</li></ul></div></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._inherits"><code>_inherits<em > = {}</em></code></h6><p >dictionary {„parent_model“: „m2o_field“} mapping the _name of the parent business
objects to the names of the corresponding foreign key fields to use:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">_inherits</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;a.model&#39;</span><span class="p">:</span> <span class="s1">&#39;a_field_id&#39;</span><span class="p">,</span>
    <span class="s1">&#39;b.model&#39;</span><span class="p">:</span> <span class="s1">&#39;b_field_id&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p >implements composition-based inheritance: the new model exposes all
the fields of the inherited models but stores none of them:
the values themselves remain stored on the linked record.</p><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >if multiple fields with the same name are defined in the
<code class="py-attr xref py">_inherits</code>-ed models, the inherited field will
correspond to the last one (in the inherits list order).</p></div></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._rec_name"><code>_rec_name<em > = None</em></code></h6><p >field to use for labeling records, default: <code >name</code></p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._order"><code>_order<em > = 'id'</em></code></h6><p >default order field for searching results</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._check_company_auto"><code>_check_company_auto<em > = False</em></code></h6><p >On write and create, call <code >_check_company</code> to ensure companies
consistency on the relational fields having <code >check_company=True</code>
as attribute.</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._parent_name"><code>_parent_name<em > = 'parent_id'</em></code></h6><p >the many2one field used as parent field</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._parent_store"><code>_parent_store<em > = False</em></code></h6><p >set to True to compute parent_path field.</p><p >Alongside a <a href="#odoo.fields.parent_path" title="odoo.fields.parent_path" class="reference alert-link internal"><code class="py-attr xref py">parent_path</code></a> field, sets up an indexed storage
of the tree structure of records, to enable faster hierarchical queries
on the records of the current model using the <code >child_of</code> and
<code >parent_of</code> domain operators.</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._abstract"><code>_abstract<em > = True</em></code></h6><p >whether model is abstract</p></section><div role="alert" class="alert alert-go_to"><h3 class="alert-title">См.также</h3><p ><a href="#odoo.models.AbstractModel" title="odoo.models.AbstractModel" class="reference alert-link internal"><code class="xref py-class py">odoo.models.AbstractModel</code></a></p></div><section class="code-attribute"><h6 id="odoo.models.BaseModel._transient"><code>_transient<em > = False</em></code></h6><p >whether model is transient</p></section><div role="alert" class="alert alert-go_to"><h3 class="alert-title">См.также</h3><p ><a href="#odoo.models.TransientModel" title="odoo.models.TransientModel" class="reference alert-link internal"><code class="xref py-class py">odoo.models.TransientModel</code></a></p></div><section class="code-attribute"><h6 id="odoo.models.BaseModel._date_name"><code>_date_name<em > = 'date'</em></code></h6><p >field to use for default calendar view</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._fold_name"><code>_fold_name<em > = 'fold'</em></code></h6><p >field to determine folded groups in kanban views</p></section></section></section><section id="abstractmodel"><h3 >AbstractModel</h3><section class="code-attribute"><h6 id="odoo.models.AbstractModel"><code>odoo.models.AbstractModel<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L239" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >псевдоним класса <a href="#odoo.models.BaseModel" title="odoo.models.BaseModel" class="reference alert-link internal"><code class="xref py-class py">odoo.models.BaseModel</code></a></p></section></section><section id="model"><h3 >Model</h3><section class="code-class"><h6 id="odoo.models.Model"><code><em >class </em>odoo.models.Model<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L6123" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Main super-class for regular database-persisted Odoo models.</p><p >Odoo models are created by inheriting from this class:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">user</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p >The system will later instantiate the class once per database (on
which the class“ module is installed).</p></section></section><section id="transientmodel"><h3 >TransientModel</h3><section class="code-class"><h6 id="odoo.models.TransientModel"><code><em >class </em>odoo.models.TransientModel<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L6139" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Model super-class for transient records, meant to be temporarily
persistent, and regularly vacuum-cleaned.</p><p >A TransientModel has a simplified access rights management, all users can
create new records, and may only access the records they created. The
superuser has unrestricted access to all TransientModel records.</p></section></section><section id="fields"><i id="reference-orm-fields"></i><i id="reference-fields"></i><h2 >Fields</h2><section class="code-class"><h6 id="odoo.fields.Field"><code><em >class </em>odoo.fields.Field<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L101" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >The field descriptor contains the field definition, and manages accesses
and assignments of the corresponding field on records. The following
attributes may be provided when instanciating a field:</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >string</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – the label of the field seen by users; if not
set, the ORM takes the field name in the class (capitalized).</li><li ><strong >help</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – the tooltip of the field seen by users</li><li ><strong >readonly</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – <p >whether the field is readonly (default: <code >False</code>)</p><p >This only has an impact on the UI. Any field assignation in code will work
(if the field is a stored field or an inversable one).</p></li><li ><strong >required</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – whether the value of the field is required (default: <code >False</code>)</li><li ><strong >index</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – whether the field is indexed in database. Note: no effect
on non-stored and virtual fields. (default: <code >False</code>)</li><li ><strong >default</strong> (<code >value</code><code > or </code><code >callable</code>) – the default value for the field; this is either a static
value, or a function taking a recordset and returning a value; use
<code >default=None</code> to discard default values for the field</li><li ><strong >states</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="reference external alert-link"><code >dict</code></a>) – <p >a dictionary mapping state values to lists of UI attribute-value
pairs; possible attributes are: <code >readonly</code>, <code >required</code>, <code >invisible</code>.</p><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >Any state-based condition requires the <code >state</code> field value to be
available on the client-side UI. This is typically done by including it in
the relevant views, possibly made invisible if not relevant for the
end-user.</p></div></li><li ><strong >groups</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – comma-separated list of group xml ids (string); this
restricts the field access to the users of the given groups only</li><li ><strong >company_dependent</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – <p >whether the field value is dependent of the current company;</p><p >The value isn’t stored on the model table.  It is registered as <code >ir.property</code>.
When the value of the company_dependent field is needed, an <code >ir.property</code>
is searched, linked to the current company (and current record if one property
exists).</p><p >If the value is changed on the record, it either modifies the existing property
for the current record (if one exists), or creates a new one for the current company
and res_id.</p><p >If the value is changed on the company side, it will impact all records on which
the value hasn’t been changed.</p></li><li ><strong >copy</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – whether the field value should be copied when the record
is duplicated (default: <code >True</code> for normal fields, <code >False</code> for
<code >one2many</code> and computed fields, including property fields and
related fields)</li><li ><strong >store</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – whether the field is stored in database
(default:<code >True</code>, <code >False</code> for computed fields)</li><li ><strong >group_operator</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – <p >aggregate function used by <a href="#odoo.models.Model.read_group" title="odoo.models.Model.read_group" class="reference alert-link internal"><code class="py-meth xref py">read_group()</code></a>
when grouping on this field.</p><p >Supported aggregate functions are:</p><blockquote ><ul ><li ><code >array_agg</code> : values, including nulls, concatenated into an array</li><li ><code >count</code> : number of rows</li><li ><code >count_distinct</code> : number of distinct rows</li><li ><code >bool_and</code> : true if all values are true, otherwise false</li><li ><code >bool_or</code> : true if at least one value is true, otherwise false</li><li ><code >max</code> : maximum value of all values</li><li ><code >min</code> : minimum value of all values</li><li ><code >avg</code> : the average (arithmetic mean) of all values</li><li ><code >sum</code> : sum of all values</li></ul></blockquote></li></ul></div></div></div><h3 >Computed Fields</h3><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >compute</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – <p >name of a method that computes the field</p><div role="alert" class="alert alert-go_to"><h3 class="alert-title">См.также</h3><p ><a href="#reference-fields-compute" class="reference alert-link internal"><span class="std-ref std">Advanced Fields/Compute fields</span></a></p></div></li><li ><strong >compute_sudo</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – whether the field should be recomputed as superuser
to bypass access rights (by default <code >True</code> for stored fields, <code >False</code>
for non stored fields)</li><li ><strong >inverse</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – name of a method that inverses the field (optional)</li><li ><strong >search</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – name of a method that implement search on the field (optional)</li><li ><strong >related</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – <p >sequence of field names</p><div role="alert" class="alert alert-go_to"><h3 class="alert-title">См.также</h3><p ><a href="#reference-fields-related" class="reference alert-link internal"><span class="std-ref std">Advanced fields/Related fields</span></a></p></div></li></ul></div></div></div></section></section><section id="basic-fields"><i id="reference-fields-basic"></i><h3 >Basic Fields</h3><section class="code-class"><h6 id="odoo.fields.Boolean"><code><em >class </em>odoo.fields.Boolean<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1113" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section><section class="code-class"><h6 id="odoo.fields.Char"><code><em >class </em>odoo.fields.Char<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1456" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Basic string field, can be length-limited, usually displayed as a
single-line string in clients.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >size</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a>) – the maximum size of values stored for that field</li><li ><strong >trim</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – states whether the value is trimmed or not (by default,
<code >True</code>). Note that the trim operation is applied only by the web client.</li><li ><strong >translate</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a><code > or </code><code >callable</code>) – enable the translation of the field’s values; use
<code >translate=True</code> to translate field values as a whole; <code >translate</code>
may also be a callable such that <code >translate(callback, value)</code>
translates <code >value</code> by using <code >callback(term)</code> to retrieve the
translation of terms.</li></ul></div></div></div></section><section class="code-class"><h6 id="odoo.fields.Float"><code><em >class </em>odoo.fields.Float<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1165" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >The precision digits are given by the attribute</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >digits</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(в Python v3.8)" class="reference external alert-link"><code >tuple</code></a><code >(</code><a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a><code >,</code><a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a><code >) or </code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – a pair (total, decimal) or a
string referencing a <code >decimal.precision</code> record.</div></div></div></section><section class="code-class"><h6 id="odoo.fields.Integer"><code><em >class </em>odoo.fields.Integer<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1127" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section></section><section id="advanced-fields"><i id="reference-fields-advanced"></i><h3 >Advanced Fields</h3><section class="code-class"><h6 id="odoo.fields.Html"><code><em >class </em>odoo.fields.Html<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1536" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section><section class="code-class"><h6 id="odoo.fields.Monetary"><code><em >class </em>odoo.fields.Monetary<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1230" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >The decimal precision and currency symbol are taken from the attribute</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >currency_field</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – name of the field holding the currency
this monetary field is expressed in (default: <code >'currency_id'</code>)</div></div></div></section><section class="code-class"><h6 id="odoo.fields.Selection"><code><em >class </em>odoo.fields.Selection<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L2024" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >selection</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link"><code >list</code></a><code >(</code><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(в Python v3.8)" class="reference external alert-link"><code >tuple</code></a><code >(</code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a><code >,</code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a><code >)</code><code >) or </code><code >callable</code><code > or </code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – specifies the possible values for this field.
It is given as either a list of pairs <code >(value, label)</code>, or a model
method, or a method name.</li><li ><strong >selection_add</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link"><code >list</code></a><code >(</code><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(в Python v3.8)" class="reference external alert-link"><code >tuple</code></a><code >(</code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a><code >,</code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a><code >)</code><code >)</code>) – <p >provides an extension of the selection in the case
of an overridden field. It is a list of pairs <code >(value, label)</code> or
singletons <code >(value,)</code>, where singleton values must appear in the
overridden selection. The new values are inserted in an order that is
consistent with the overridden selection and this list:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">selection</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">)]</span>
<span class="n">selection_add</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,)]</span>
<span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</li></ul></div></div></div><p >The attribute <code >selection</code> is mandatory except in the case of
<code >related</code> or extended fields.</p></section><section class="code-class"><h6 id="odoo.fields.Text"><code><em >class </em>odoo.fields.Text<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1515" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Very similar to <a href="#odoo.fields.Char" title="odoo.fields.Char" class="reference alert-link internal"><code class="xref py-class py">Char</code></a> but used for longer contents, does not
have a size and usually displayed as a multiline text box.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >translate</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a><code > or </code><code >callable</code>) – enable the translation of the field’s values; use
<code >translate=True</code> to translate field values as a whole; <code >translate</code>
may also be a callable such that <code >translate(callback, value)</code>
translates <code >value</code> by using <code >callback(term)</code> to retrieve the
translation of terms.</div></div></div></section></section><section id="date-time-fields"><i id="reference-fields-date"></i><h4 >Date(time) Fields</h4><p >Dates and Datetimes are very important fields in any kind of business
application, they are heavily used in many popular Odoo applications such as
logistics or accounting and their misuse can create invisible yet painful
bugs, this excerpt aims to provide Odoo developers with the knowledge required
to avoid misusing these fields.</p><p >When assigning a value to a Date/Datetime field, the following options are valid:</p><ul ><li >A <code >date</code> or <code >datetime</code> object.</li><li >A string in the proper server format <em >(YYYY-MM-DD)</em> for Date fields,
<em >(YYYY-MM-DD HH:MM:SS)</em> for Datetime fields.</li><li ><code >False</code> or <code >None</code>.</li></ul><p >The Date and Datetime fields class have helper methods to attempt conversion
into a compatible type: <a href="#odoo.fields.Date.to_date" title="odoo.fields.Date.to_date" class="reference internal"><code class="xref py-func py">to_date()</code></a> will convert to a <code >datetime.date</code>
object while <a href="#odoo.fields.Datetime.to_datetime" title="odoo.fields.Datetime.to_datetime" class="reference internal"><code class="xref py-func py">to_datetime()</code></a> will convert to a <code >datetime.datetime</code>.</p><div role="alert" class="alert admonition-example"><h3 class="alert-title">Example</h3><p >To parse date/datetimes coming from external sources:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">fields</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">to_date</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;date_from&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div><p >Date / Datetime comparison best practices:</p><ul ><li >Date fields can <strong >only</strong> be compared to date objects.</li><li >Datetime fields can <strong >only</strong> be compared to datetime objects.</li></ul><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >Strings representing dates and datetimes can be compared
between each other, however the result may not be the expected
result, as a datetime string will always be greater than a
date string, therefore this practice is <strong >heavily</strong>
discouraged.</p></div><p >Common operations with dates and datetimes such as addition, substraction or
fetching the start/end of a period are exposed through both
<a href="#odoo.fields.Date" title="odoo.fields.Date" class="reference internal"><code class="xref py-class py">Date</code></a> and <a href="#odoo.fields.Datetime" title="odoo.fields.Datetime" class="reference internal"><code class="xref py-class py">Datetime</code></a>.
These helpers are also available by importing <code >odoo.tools.date_utils</code>.</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >Timezones</p><p >Datetime fields are stored as <code >timestamp without timezone</code> columns in the database and are stored
in the UTC timezone. This is by design, as it makes the Odoo database independent from the timezone
of the hosting server system. Timezone conversion is managed entirely by the client side.</p></div><section class="code-class"><h6 id="odoo.fields.Date"><code><em >class </em>odoo.fields.Date<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1597" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >This field type encapsulates a python date object.
:type date:</p><section class="code-staticmethod"><h6 id="odoo.fields.Date.add"><code><em >static </em>add(<em>value</em>, <em>*args</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L178" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the sum of <code >value</code> and a <code class="xref py-class py">relativedelta</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – initial date or datetime.</li><li ><strong >args</strong> – positional args to pass directly to <code class="xref py-class py">relativedelta</code>.</li><li ><strong >kwargs</strong> – keyword args to pass directly to <code class="xref py-class py">relativedelta</code>.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">the resulting date/datetime.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.context_today"><code><em >static </em>context_today(<em>record</em>, <em>timestamp=None</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1618" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the current date as seen in the client’s timezone in a format
fit for date fields.</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >This method may be used to compute default values.</p></div><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >record</strong> – recordset from which the timezone will be obtained.</li><li ><strong >timestamp</strong> (<code >datetime</code>) – optional datetime value to use instead of
the current date and time (must be a datetime, regular dates
can’t be converted between timezones).</li></ul></div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">date</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.end_of"><code><em >static </em>end_of(<em>value</em>, <em>granularity</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L139" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Get end of a time period from a date or a datetime.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – initial date or datetime.</li><li ><strong >granularity</strong> – Type of period in string, can be year, quarter, month, week, day or hour.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">A date/datetime object corresponding to the start of the specified period.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.start_of"><code><em >static </em>start_of(<em>value</em>, <em>granularity</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L100" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Get start of a time period from a date or a datetime.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – initial date or datetime.</li><li ><strong >granularity</strong> – type of period in string, can be year, quarter, month, week, day or hour.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">a date/datetime object corresponding to the start of the specified period.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.subtract"><code><em >static </em>subtract(<em>value</em>, <em>*args</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L190" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the difference between <code >value</code> and a <code class="xref py-class py">relativedelta</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – initial date or datetime.</li><li ><strong >args</strong> – positional args to pass directly to <code class="xref py-class py">relativedelta</code>.</li><li ><strong >kwargs</strong> – keyword args to pass directly to <code class="xref py-class py">relativedelta</code>.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">the resulting date/datetime.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.to_date"><code><em >static </em>to_date(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1643" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Attempt to convert <code >value</code> to a <code class="xref py-class py">date</code> object.</p><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >If a datetime object is given as value,
it will be converted to a date object and all
datetime-specific information will be lost (HMS, TZ, …).</p></div><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >value</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a><code > or </code><code >date</code><code > or </code><code >datetime</code>) – value to convert.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">an object representing <code >value</code>.</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">date or <a href="https://docs.python.org/3/library/constants.html#None" title="(в Python v3.8)" class="reference external alert-link">None</a></div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.to_string"><code><em >static </em>to_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1671" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Convert a <code class="xref py-class py">date</code> or <code class="xref py-class py">datetime</code> object to a string.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >value</strong> – value to convert.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">a string representing <code >value</code> in the server’s date format, if <code >value</code> is of
type <code class="xref py-class py">datetime</code>, the hours, minute, seconds, tzinfo will be truncated.</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link">str</a></div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.today"><code><em >static </em>today(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1610" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the current day in the format expected by the ORM.</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >This function may be used to compute default values.</p></div></section></section><section class="code-class"><h6 id="odoo.fields.Datetime"><code><em >class </em>odoo.fields.Datetime<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1698" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >This field type encapsulates a python datetime object.
:type datetime:</p><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.add"><code><em >static </em>add(<em>value</em>, <em>*args</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L178" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the sum of <code >value</code> and a <code class="xref py-class py">relativedelta</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – initial date or datetime.</li><li ><strong >args</strong> – positional args to pass directly to <code class="xref py-class py">relativedelta</code>.</li><li ><strong >kwargs</strong> – keyword args to pass directly to <code class="xref py-class py">relativedelta</code>.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">the resulting date/datetime.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.context_timestamp"><code><em >static </em>context_timestamp(<em>record</em>, <em>timestamp</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1725" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the given timestamp converted to the client’s timezone.</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >This method is <em >not</em> meant for use as a default initializer,
because datetime fields are automatically converted upon
display on client side. For default values, <a href="#odoo.fields.Datetime.now" title="odoo.fields.Datetime.now" class="reference alert-link internal"><code class="py-meth xref py">now()</code></a>
should be used instead.</p></div><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >record</strong> – recordset from which the timezone will be obtained.</li><li ><strong >timestamp</strong> (<code >datetime</code>) – naive datetime value (expressed in UTC)
to be converted to the client timezone.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">timestamp converted to timezone-aware datetime in context timezone.</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">datetime</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.end_of"><code><em >static </em>end_of(<em>value</em>, <em>granularity</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L139" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Get end of a time period from a date or a datetime.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – initial date or datetime.</li><li ><strong >granularity</strong> – Type of period in string, can be year, quarter, month, week, day or hour.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">A date/datetime object corresponding to the start of the specified period.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.now"><code><em >static </em>now(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1711" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the current day and time in the format expected by the ORM.</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >This function may be used to compute default values.</p></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.start_of"><code><em >static </em>start_of(<em>value</em>, <em>granularity</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L100" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Get start of a time period from a date or a datetime.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – initial date or datetime.</li><li ><strong >granularity</strong> – type of period in string, can be year, quarter, month, week, day or hour.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">a date/datetime object corresponding to the start of the specified period.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.subtract"><code><em >static </em>subtract(<em>value</em>, <em>*args</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L190" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the difference between <code >value</code> and a <code class="xref py-class py">relativedelta</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – initial date or datetime.</li><li ><strong >args</strong> – positional args to pass directly to <code class="xref py-class py">relativedelta</code>.</li><li ><strong >kwargs</strong> – keyword args to pass directly to <code class="xref py-class py">relativedelta</code>.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">the resulting date/datetime.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.to_datetime"><code><em >static </em>to_datetime(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1753" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Convert an ORM <code >value</code> into a <code class="xref py-class py">datetime</code> value.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >value</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a><code > or </code><code >date</code><code > or </code><code >datetime</code>) – value to convert.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">an object representing <code >value</code>.</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">datetime or <a href="https://docs.python.org/3/library/constants.html#None" title="(в Python v3.8)" class="reference external alert-link">None</a></div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.to_string"><code><em >static </em>to_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1778" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Convert a <code class="xref py-class py">datetime</code> or <code class="xref py-class py">date</code> object to a string.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >value</strong> (<code >datetime</code><code > or </code><code >date</code>) – value to convert.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">a string representing <code >value</code> in the server’s datetime format,
if <code >value</code> is of type <code class="xref py-class py">date</code>,
the time portion will be midnight (00:00:00).</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link">str</a></div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.today"><code><em >static </em>today(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1720" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the current day, at midnight (00:00:00).</p></section></section></section><section id="relational-fields"><i id="reference-fields-relational"></i><h4 >Relational Fields</h4><section class="code-class"><h6 id="odoo.fields.Many2one"><code><em >class </em>odoo.fields.Many2one<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L2281" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >The value of such a field is a recordset of size 0 (no
record) or 1 (a single record).</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >comodel_name</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – name of the target model
<code >Mandatory</code> except for related or extended fields.</li><li ><strong >domain</strong> – an optional domain to set on candidate values on the
client side (domain or string)</li><li ><strong >context</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="reference external alert-link"><code >dict</code></a>) – an optional context to use on the client side when
handling that field</li><li ><strong >ondelete</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – what to do when the referred record is deleted;
possible values are: <code >'set null'</code>, <code >'restrict'</code>, <code >'cascade'</code></li><li ><strong >auto_join</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – whether JOINs are generated upon search through that
field (default: <code >False</code>)</li><li ><strong >delegate</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – set it to <code >True</code> to make fields of the target model
accessible from the current model (corresponds to <code >_inherits</code>)</li><li ><strong >check_company</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – Mark the field to be verified in
<a href="../howtos/company.html#odoo.models.Model._check_company" title="odoo.models.Model._check_company" class="reference alert-link internal"><code class="py-meth xref py">_check_company()</code></a>. Add a default company
domain depending on the field attributes.</li></ul></div></div></div></section><section class="code-class"><h6 id="odoo.fields.One2many"><code><em >class </em>odoo.fields.One2many<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L2772" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >One2many field; the value of such a field is the recordset of all the
records in <code >comodel_name</code> such that the field <code >inverse_name</code> is equal to
the current record.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >comodel_name</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – name of the target model</li><li ><strong >inverse_name</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – name of the inverse <code >Many2one</code> field in
<code >comodel_name</code></li><li ><strong >domain</strong> – an optional domain to set on candidate values on the
client side (domain or string)</li><li ><strong >context</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="reference external alert-link"><code >dict</code></a>) – an optional context to use on the client side when
handling that field</li><li ><strong >auto_join</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – whether JOINs are generated upon search through that
field (default: <code >False</code>)</li><li ><strong >limit</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a>) – optional limit to use upon read</li></ul></div></div></div><p >The attributes <code >comodel_name</code> and <code >inverse_name</code> are mandatory except in
the case of related fields or field extensions.</p></section><section class="code-class"><h6 id="odoo.fields.Many2many"><code><em >class </em>odoo.fields.Many2many<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L3035" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Many2many field; the value of such a field is the recordset.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >comodel_name</strong> – name of the target model (string)
mandatory except in the case of related or extended fields</li><li ><strong >relation</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – optional name of the table that stores the relation in
the database</li><li ><strong >column1</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – optional name of the column referring to «these» records
in the table <code >relation</code></li><li ><strong >column2</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – optional name of the column referring to «those» records
in the table <code >relation</code></li></ul></div></div></div><p >The attributes <code >relation</code>, <code >column1</code> and <code >column2</code> are optional.
If not given, names are automatically generated from model names,
provided <code >model_name</code> and <code >comodel_name</code> are different!</p><p >Note that having several fields with implicit relation parameters on a
given model with the same comodel is not accepted by the ORM, since
those field would use the same table. The ORM prevents two many2many
fields to use the same relation parameters, except if</p><ul ><li >both fields use the same model, comodel, and relation parameters are
explicit; or</li><li >at least one field belongs to a model with <code >_auto = False</code>.</li></ul><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >domain</strong> – an optional domain to set on candidate values on the
client side (domain or string)</li><li ><strong >context</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="reference external alert-link"><code >dict</code></a>) – an optional context to use on the client side when
handling that field</li><li ><strong >check_company</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – Mark the field to be verified in
<a href="../howtos/company.html#odoo.models.Model._check_company" title="odoo.models.Model._check_company" class="reference alert-link internal"><code class="py-meth xref py">_check_company()</code></a>. Add a default company
domain depending on the field attributes.</li><li ><strong >limit</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a>) – optional limit to use upon read</li></ul></div></div></div></section></section><section id="pseudo-relational-fields"><h4 >Pseudo-relational fields</h4><section class="code-class"><h6 id="odoo.fields.Reference"><code><em >class </em>odoo.fields.Reference<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L2174" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section><section class="code-class"><h6 id="odoo.fields.Many2oneReference"><code><em >class </em>odoo.fields.Many2oneReference<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L2510" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section></section><section id="computed-fields"><i id="reference-fields-compute"></i><h4 >Computed Fields</h4><p >Fields can be computed (instead of read straight from the database) using the
<code >compute</code> parameter. <strong >It must assign the computed value to the field</strong>. If
it uses the values of other <em >fields</em>, it should specify those fields using
<a href="#odoo.api.depends" title="odoo.api.depends" class="reference internal"><code class="xref py-func py">depends()</code></a>.</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">odoo</span> <span class="kn">import</span> <span class="n">api</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_total&#39;</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;tax&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">record</span><span class="o">.</span><span class="n">tax</span>
</pre></div>
</div>
<ul ><li ><p >dependencies can be dotted paths when using sub-fields:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;line_ids.value&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">line_ids</span><span class="p">)</span>
</pre></div>
</div>
</li><li >computed fields are not stored by default, they are computed and
returned when requested. Setting <code >store=True</code> will store them in the
database and automatically enable searching.</li><li ><p >searching on a computed field can also be enabled by setting the <code >search</code>
parameter. The value is a method name returning a
<a href="#reference-orm-domains" class="reference internal"><span class="std-ref std">Search domains</span></a>.</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">upper_name</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_upper&#39;</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="s1">&#39;_search_upper&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_search_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;like&#39;</span><span class="p">:</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="s1">&#39;ilike&#39;</span>
    <span class="k">return</span> <span class="p">[(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">)]</span>
</pre></div>
</div>
<p >The search method is invoked when processing domains before doing an
actual search on the model. It must return a domain equivalent to the
condition: <code >field operator value</code>.</p></li></ul><ul ><li ><p >Computed fields are readonly by default. To allow <em >setting</em> values on a computed field, use the <code >inverse</code>
parameter. It is the name of a function reversing the computation and
setting the relevant fields:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">document</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_get_document&#39;</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="s1">&#39;_set_document&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_get_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">get_document_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">document</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">_set_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">document</span><span class="p">:</span> <span class="k">continue</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">get_document_path</span><span class="p">())</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">document</span><span class="p">)</span>
</pre></div>
</div>
</li><li ><p >multiple fields can be computed at the same time by the same method, just
use the same method on all fields and set all of them:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">discount_value</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_apply_discount&#39;</span><span class="p">)</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_apply_discount&#39;</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;discount&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_apply_discount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="c1"># compute actual discount from discount percentage</span>
        <span class="n">discount</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">record</span><span class="o">.</span><span class="n">discount</span>
        <span class="n">record</span><span class="o">.</span><span class="n">discount_value</span> <span class="o">=</span> <span class="n">discount</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">discount</span>
</pre></div>
</div>
</li></ul></section><section id="related-fields"><i id="reference-fields-related"></i><h4 >Related fields</h4><p >A special case of computed fields are <em >related</em> (proxy) fields, which provide
the value of a sub-field on the current record. They are defined by setting
the <code >related</code> parameter and like regular computed fields they can be
stored:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nickname</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">related</span><span class="o">=</span><span class="s1">&#39;user_id.partner_id.name&#39;</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p >The value of a related field is given by following a sequence of
relational fields and reading a field on the reached model. The complete
sequence of fields to traverse is specified by the <code >related</code> attribute.</p><p >Some field attributes are automatically copied from the source field if
they are not redefined: <code >string</code>, <code >help</code>, <code >readonly</code>, <code >required</code> (only
if all fields in the sequence are required), <code >groups</code>, <code >digits</code>, <code >size</code>,
<code >translate</code>, <code >sanitize</code>, <code >selection</code>, <code >comodel_name</code>, <code >domain</code>,
<code >context</code>. All semantic-free attributes are copied from the source
field.</p><p >By default, the values of related fields are not stored to the database.
Add the attribute <code >store=True</code> to make it stored, just like computed
fields. Related fields are automatically recomputed when their
dependencies are modified.</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >The related fields are computed in sudo mode.</p></div></section><section id="automatic-fields"><i id="reference-fields-automatic"></i><h3 >Automatic fields</h3><section class="code-attribute"><h6 id="odoo.fields.id"><code>odoo.fields.id</code></h6><p >Identifier <a href="#odoo.fields.Field" title="odoo.fields.Field" class="reference alert-link internal"><code class="xref py-class py">field</code></a></p><p >If length of current recordset is 1, return id of unique record in it.</p><p >Raise an Error otherwise.</p></section><section class="code-attribute"><h6 id="odoo.fields.create_date"><code>odoo.fields.create_date</code></h6><p ><a href="#odoo.fields.Datetime" title="odoo.fields.Datetime" class="reference alert-link internal"><code class="xref py-class py">Datetime</code></a></p></section><section class="code-attribute"><h6 id="odoo.fields.create_uid"><code>odoo.fields.create_uid</code></h6><p ><a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="reference alert-link internal"><code class="xref py-class py">Many2one</code></a></p></section><section class="code-attribute"><h6 id="odoo.fields.write_date"><code>odoo.fields.write_date</code></h6><p ><a href="#odoo.fields.Datetime" title="odoo.fields.Datetime" class="reference alert-link internal"><code class="xref py-class py">Datetime</code></a></p></section><section class="code-attribute"><h6 id="odoo.fields.write_uid"><code>odoo.fields.write_uid</code></h6><p ><a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="reference alert-link internal"><code class="xref py-class py">Many2one</code></a></p></section></section><section id="reserved-field-names"><i id="reference-orm-fields-reserved"></i><h3 >Reserved Field names</h3><p >A few field names are reserved for pre-defined behaviors beyond that of
automated fields. They should be defined on a model when the related
behavior is desired:</p><section class="code-attribute"><h6 id="odoo.fields.name"><code>odoo.fields.name</code></h6><p >default value for <a href="#odoo.models.BaseModel._rec_name" title="odoo.models.BaseModel._rec_name" class="reference alert-link internal"><code class="py-attr xref py">_rec_name</code></a>, used to
display records in context where a representative «naming» is
necessary.</p><p ><a href="#odoo.fields.Char" title="odoo.fields.Char" class="reference alert-link internal"><code class="xref py-class py">Char</code></a></p></section><section class="code-attribute"><h6 id="odoo.fields.active"><code>odoo.fields.active</code></h6><p >toggles the global visibility of the record, if <code >active</code> is set to
<code >False</code> the record is invisible in most searches and listing.</p><p ><a href="#odoo.fields.Boolean" title="odoo.fields.Boolean" class="reference alert-link internal"><code class="xref py-class py">Boolean</code></a></p></section><section class="code-attribute"><h6 id="odoo.fields.state"><code>odoo.fields.state</code></h6><p >lifecycle stages of the object, used by the <code >states</code> attribute on
<a href="#odoo.fields.Field" title="odoo.fields.Field" class="reference alert-link internal"><code class="xref py-class py">fields</code></a>.</p><p ><a href="#odoo.fields.Selection" title="odoo.fields.Selection" class="reference alert-link internal"><code class="xref py-class py">Selection</code></a></p></section><section class="code-attribute"><h6 id="odoo.fields.parent_id"><code>odoo.fields.parent_id</code></h6><p >default_value of <a href="#odoo.models.BaseModel._parent_name" title="odoo.models.BaseModel._parent_name" class="reference alert-link internal"><code class="py-attr xref py">_parent_name</code></a>, used to organize
records in a tree structure and enables the <code >child_of</code>
and <code >parent_of</code> operators in domains.</p><p ><a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="reference alert-link internal"><code class="xref py-class py">Many2one</code></a></p></section><section class="code-attribute"><h6 id="odoo.fields.parent_path"><code>odoo.fields.parent_path</code></h6><p >When <a href="#odoo.models.BaseModel._parent_store" title="odoo.models.BaseModel._parent_store" class="reference alert-link internal"><code class="py-attr xref py">_parent_store</code></a> is set to True, used to store a value reflecting
the tree structure of <a href="#odoo.models.BaseModel._parent_name" title="odoo.models.BaseModel._parent_name" class="reference alert-link internal"><code class="py-attr xref py">_parent_name</code></a>, and to optimize the operators
<code >child_of</code> and <code >parent_of</code> in search domains.
It must be declared with <code >index=True</code> for proper operation.</p><p ><a href="#odoo.fields.Char" title="odoo.fields.Char" class="reference alert-link internal"><code class="xref py-class py">Char</code></a></p></section><section class="code-attribute"><h6 id="odoo.fields.company_id"><code>odoo.fields.company_id</code></h6><p >Main field name used for Odoo multi-company behavior.</p><p >Used by <code >:meth:~odoo.models._check_company</code> to check multi company consistency.
Defines whether a record is shared between companies (no value) or only
accessible by the users of a given company.</p><p ><a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="reference alert-link internal"><code class="xref py-class py">Many2one</code></a>
:type: <code class="xref py-class py">res_company</code></p></section></section><section id="recordsets"><h2 >Recordsets</h2><p >Interactions with models and records are performed through recordsets, an ordered
collection of records of the same model.</p><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >Contrary to what the name implies, it is currently possible for
recordsets to contain duplicates. This may change in the future.</p></div><p >Methods defined on a model are executed on a recordset, and their <code >self</code> is
a recordset:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;a.model&#39;</span>
    <span class="k">def</span> <span class="nf">a_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># self can be anything between 0 records and all records in the</span>
        <span class="c1"># database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_operation</span><span class="p">()</span>
</pre></div>
</div>
<p >Iterating on a recordset will yield new sets of <em >a single record</em>
(«singletons»), much like iterating on a Python string yields strings of a
single characters:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="c1"># =&gt; a.model(1, 2, 3, 4, 5)</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">record</span><span class="p">)</span> <span class="c1"># =&gt; a.model(1), then a.model(2), then a.model(3), ...</span>
</pre></div>
</div>
</section><section id="field-access"><h3 >Field access</h3><p >Recordsets provide an «Active Record» interface: model fields can be read and
written directly from the record as attributes.</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >When accessing non-relational fields on a recordset of potentially multiple
records, use <code class="py-meth xref py">mapped()</code>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">total_qty</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;qty&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div><p >Field values can also be accessed like dict items, which is more elegant and
safer than <code >getattr()</code> for dynamic field names.
Setting a field’s value triggers an update to the database:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">name</span>
<span class="go">Example Name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">company_id</span><span class="o">.</span><span class="n">name</span>
<span class="go">Company Name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Bob&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;name&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>
<span class="go">Bob</span>
</pre></div>
</div>
<div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >Trying to read a field on multiple records will raise an error for non relational
fields.</p></div><p >Accessing a relational field (<a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="reference internal"><code class="xref py-class py">Many2one</code></a>,
<a href="#odoo.fields.One2many" title="odoo.fields.One2many" class="reference internal"><code class="xref py-class py">One2many</code></a>, <a href="#odoo.fields.Many2many" title="odoo.fields.Many2many" class="reference internal"><code class="xref py-class py">Many2many</code></a>)
<em >always</em> returns a recordset, empty if the field is not set.</p></section><section id="record-cache-and-prefetching"><h3 >Record cache and prefetching</h3><p >Odoo maintains a cache for the fields of the records, so that not every field
access issues a database request, which would be terrible for performance. The
following example queries the database only for the first statement:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">record</span><span class="o">.</span><span class="n">name</span>             <span class="c1"># first access reads value from database</span>
<span class="n">record</span><span class="o">.</span><span class="n">name</span>             <span class="c1"># second access gets value from cache</span>
</pre></div>
</div>
<p >To avoid reading one field on one record at a time, Odoo <em >prefetches</em> records
and fields following some heuristics to get good performance. Once a field must
be read on a given record, the ORM actually reads that field on a larger
recordset, and stores the returned values in cache for later use. The prefetched
recordset is usually the recordset from which the record comes by iteration.
Moreover, all simple stored fields (boolean, integer, float, char, text, date,
datetime, selection, many2one) are fetched altogether; they correspond to the
columns of the model’s table, and are fetched efficiently in the same query.</p><p >Consider the following example, where <code >partners</code> is a recordset of 1000
records. Without prefetching, the loop would make 2000 queries to the database.
With prefetching, only one query is made:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">partner</span> <span class="ow">in</span> <span class="n">partners</span><span class="p">:</span>
    <span class="nb">print</span> <span class="n">partner</span><span class="o">.</span><span class="n">name</span>          <span class="c1"># first pass prefetches &#39;name&#39; and &#39;lang&#39;</span>
                                <span class="c1"># (and other fields) on all &#39;partners&#39;</span>
    <span class="nb">print</span> <span class="n">partner</span><span class="o">.</span><span class="n">lang</span>
</pre></div>
</div>
<p >The prefetching also works on <em >secondary records</em>: when relational fields are
read, their values (which are records) are  subscribed for future prefetching.
Accessing one of those secondary records prefetches all secondary records from
the same model. This makes the following example generate only two queries, one
for partners and one for countries:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">countries</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">partner</span> <span class="ow">in</span> <span class="n">partners</span><span class="p">:</span>
    <span class="n">country</span> <span class="o">=</span> <span class="n">partner</span><span class="o">.</span><span class="n">country_id</span>        <span class="c1"># first pass prefetches all partners</span>
    <span class="n">countries</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">country</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>         <span class="c1"># first pass prefetches all countries</span>
</pre></div>
</div>
</section><section id="module-odoo.api"><i id="method-decorators"></i><i id="reference-api-decorators"></i><h2 >Method decorators</h2><p >The Odoo API module defines Odoo Environments and method decorators.</p><section class="code-function"><h6 id="odoo.api.depends"><code>odoo.api.depends(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L184" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return a decorator that specifies the field dependencies of a «compute»
method (for new-style function fields). Each argument must be a string
that consists in a dot-separated sequence of field names:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pname</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_pname&#39;</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;partner_id.name&#39;</span><span class="p">,</span> <span class="s1">&#39;partner_id.is_company&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_pname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">is_company</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">pname</span> <span class="o">=</span> <span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">pname</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p >One may also pass a single function as argument. In that case, the
dependencies are given by calling the function with the field’s model.</p></section><section class="code-function"><h6 id="odoo.api.depends_context"><code>odoo.api.depends_context(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L209" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return a decorator that specifies the context dependencies of a
non-stored «compute» method.  Each argument is a key in the context’s
dictionary:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">price</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_product_price&#39;</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">depends_context</span><span class="p">(</span><span class="s1">&#39;pricelist&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_product_price</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">product</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pricelist&#39;</span><span class="p">):</span>
            <span class="n">pricelist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;product.pricelist&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;pricelist&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pricelist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;product.pricelist&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_default_pricelist</span><span class="p">()</span>
        <span class="n">product</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">pricelist</span><span class="o">.</span><span class="n">get_products_price</span><span class="p">(</span><span class="n">product</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
<p >All dependencies must be hashable.  The following keys have special
support:</p><ul ><li ><code >force_company</code> (value in context or current company id),</li><li ><code >uid</code> (current user id and superuser flag),</li><li ><code >active_test</code> (value in env.context or value in field.context).</li></ul></section><section class="code-function"><h6 id="odoo.api.constrains"><code>odoo.api.constrains(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L101" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Decorate a constraint checker.</p><p >Each argument must be a field name used in the check:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">constrains</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_check_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">record</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Fields name and description must be different&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >Invoked on the records on which one of the named fields has been modified.</p><p >Should raise <a href="#odoo.exceptions.ValidationError" title="odoo.exceptions.ValidationError" class="reference alert-link internal"><code class="py-exc xref py">ValidationError</code></a> if the
validation failed.</p><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p ><code >@constrains</code> only supports simple field names, dotted names
(fields of relational fields e.g. <code >partner_id.customer</code>) are not
supported and will be ignored.</p><p ><code >@constrains</code> will be triggered only if the declared fields in the
decorated method are included in the <code >create</code> or <code >write</code> call.
It implies that fields not present in a view will not trigger a call
during a record creation. A override of <code >create</code> is necessary to make
sure a constraint will always be triggered (e.g. to test the absence of
value).</p></div></section><section class="code-function"><h6 id="odoo.api.onchange"><code>odoo.api.onchange(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L134" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return a decorator to decorate an onchange method for given fields.</p><p >In the form views where the field appears, the method will be called
when one of the given fields is modified. The method is invoked on a
pseudo-record that contains the values present in the form. Field
assignments on that record are automatically sent back to the client.</p><p >Each argument must be a field name:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">onchange</span><span class="p">(</span><span class="s1">&#39;partner_id&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_onchange_partner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Dear </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">{</span>
    <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;other_id&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;partner_id&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="n">partner_id</span><span class="p">)]},</span>
    <span class="s1">&#39;warning&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;What is this?&quot;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;notification&#39;</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p >If the type is set to notification, the warning will be displayed in a notification.
Otherwise it will be displayed in a dialog as default.</p><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p ><code >@onchange</code> only supports simple field names, dotted names
(fields of relational fields e.g. <code >partner_id.tz</code>) are not
supported and will be ignored</p></div><div role="alert" class="alert-danger alert"><h3 class="alert-title">Опасно</h3><p >Since <code >@onchange</code> returns a recordset of pseudo-records,
calling any one of the CRUD methods
(<code class="py-meth xref py">create()</code>, <code class="py-meth xref py">read()</code>, <code class="py-meth xref py">write()</code>, <code class="py-meth xref py">unlink()</code>)
on the aforementioned recordset is undefined behaviour,
as they potentially do not exist in the database yet.</p><p >Instead, simply set the record’s field like shown in the example
above or call the <code class="py-meth xref py">update()</code> method.</p></div><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >It is not possible for a <code >one2many</code> or <code >many2many</code> field to modify
itself via onchange. This is a webclient limitation - see <a href="https://github.com/odoo/odoo/issues/2693" class="reference external alert-link">#2693</a>.</p></div></section><section class="code-function"><h6 id="odoo.api.returns"><code>odoo.api.returns(<em>model</em>, <em>downgrade=None</em>, <em>upgrade=None</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L235" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return a decorator for methods that return instances of <code >model</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >model</strong> – a model name, or <code >'self'</code> for the current model</li><li ><strong >downgrade</strong> – a function <code >downgrade(self, value, *args, **kwargs)</code>
to convert the record-style <code >value</code> to a traditional-style output</li><li ><strong >upgrade</strong> – a function <code >upgrade(self, value, *args, **kwargs)</code>
to convert the traditional-style <code >value</code> to a record-style output</li></ul></div></div></div><p >The arguments <code >self</code>, <code >*args</code> and <code >**kwargs</code> are the ones passed
to the method in the record-style.</p><p >The decorator adapts the method output to the api style: <code >id</code>, <code >ids</code> or
<code >False</code> for the traditional style, and recordset for the record style:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@model</span>
<span class="nd">@returns</span><span class="p">(</span><span class="s1">&#39;res.partner&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">find_partner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
    <span class="o">...</span>     <span class="c1"># return some record</span>

<span class="c1"># output depends on call style: traditional vs record style</span>
<span class="n">partner_id</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">find_partner</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>

<span class="c1"># recs = model.browse(cr, uid, ids, context)</span>
<span class="n">partner_record</span> <span class="o">=</span> <span class="n">recs</span><span class="o">.</span><span class="n">find_partner</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</pre></div>
</div>
<p >Note that the decorated method must satisfy that convention.</p><p >Those decorators are automatically <em >inherited</em>: a method that overrides
a decorated existing method will be decorated with the same
<code >@returns(model)</code>.</p></section><section class="code-function"><h6 id="odoo.api.model_create_multi"><code>odoo.api.model_create_multi(<em>method</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L347" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Decorate a method that takes a list of dictionaries and creates multiple
records. The method may be called with either a single dict or a list of
dicts:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">record</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>
<span class="n">records</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="n">vals</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</pre></div>
</div>
</section></section><section id="environment"><i id="reference-orm-environment"></i><h2 >Environment</h2><p >The <code class="xref py-class py">Environment</code> stores various contextual data used by
the ORM: the database cursor (for database queries), the current user
(for access rights checking) and the current context (storing arbitrary
metadata). The environment also stores caches.</p><p >All recordsets have an environment, which is immutable, can be accessed
using <code class="py-attr xref py">env</code> and gives access to:</p><ul ><li >the current user (<a href="#odoo.api.Environment.user" title="odoo.api.Environment.user" class="reference internal"><code class="py-attr xref py">user</code></a>)</li><li >the cursor (<code class="py-attr xref py">cr</code>)</li><li >the superuser flag (<code class="py-attr xref py">su</code>)</li><li >or the context (<code class="py-attr xref py">context</code>)</li></ul><div class="highlight-bash"><div class="highlight"><pre><span></span>&gt;&gt;&gt; records.env
&lt;Environment object ...&gt;
&gt;&gt;&gt; records.env.user
res.user<span class="o">(</span><span class="m">3</span><span class="o">)</span>
&gt;&gt;&gt; records.env.cr
&lt;Cursor object ...<span class="o">)</span>
</pre></div>
</div>
<p >When creating a recordset from an other recordset, the environment is
inherited. The environment can be used to get an empty recordset in an
other model, and query that model:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;res.partner&#39;</span><span class="p">]</span>
<span class="go">res.partner()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">search</span><span class="p">([[</span><span class="s1">&#39;is_company&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;customer&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">]])</span>
<span class="go">res.partner(7, 18, 12, 14, 17, 19, 8, 31, 26, 16, 13, 20, 30, 22, 29, 15, 23, 28, 74)</span>
</pre></div>
</div>
<section class="code-method"><h6 id="odoo.api.Environment.ref"><code>Environment.ref(<em>xml_id</em>, <em>raise_if_not_found=True</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L507" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the record corresponding to the given <code >xml_id</code>.</p></section><section class="code-attribute"><h6 id="odoo.api.Environment.lang"><code>Environment.lang</code></h6><p >Return the current language code.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link">str</a></div></div></div></section><section class="code-attribute"><h6 id="odoo.api.Environment.user"><code>Environment.user</code></h6><p >Return the current user (as an instance).</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><code class="xref py-class py">res_users</code></div></div></div></section><section class="code-attribute"><h6 id="odoo.api.Environment.company"><code>Environment.company</code></h6><p >Return the current company (as an instance).</p><p >If not specified in the context (<code >allowed_company_ids</code>),
fallback on current user main company.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="reference alert-link internal"><strong >AccessError</strong></a> – invalid or unauthorized <code >allowed_company_ids</code> context key content.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">current company (default=`self.user.company_id`)</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">res.company</div></div></div><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >No sanity checks applied in sudo mode !
When in sudo mode, a user can access any company,
even if not in his allowed companies.</p><p >This allows to trigger inter-company modifications,
even if the current user doesn’t have access to
the targeted company.</p></div></section><section class="code-attribute"><h6 id="odoo.api.Environment.companies"><code>Environment.companies</code></h6><p >Return a recordset of the enabled companies by the user.</p><p >If not specified in the context(<code >allowed_company_ids</code>),
fallback on current user companies.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="reference alert-link internal"><strong >AccessError</strong></a> – invalid or unauthorized <code >allowed_company_ids</code> context key content.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">current companies (default=`self.user.company_ids`)</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">res.company</div></div></div><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >No sanity checks applied in sudo mode !
When in sudo mode, a user can access any company,
even if not in his allowed companies.</p><p >This allows to trigger inter-company modifications,
even if the current user doesn’t have access to
the targeted company.</p></div></section></section><section id="altering-the-environment"><h3 >Altering the environment</h3><section class="code-method"><h6 id="odoo.models.Model.with_context"><code>Model.with_context(<em>[context][, **overrides]</em>) → records<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5031" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Returns a new version of this recordset attached to an extended
context.</p><p >The extended context is either the provided <code >context</code> in which
<code >overrides</code> are merged or the <em >current</em> context in which
<code >overrides</code> are merged e.g.:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># current context is {&#39;key1&#39;: True}</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">with_context</span><span class="p">({},</span> <span class="n">key2</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># -&gt; r2._context is {&#39;key2&#39;: True}</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">key2</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># -&gt; r2._context is {&#39;key1&#39;: True, &#39;key2&#39;: True}</span>
</pre></div>
</div>
</section><section class="code-method"><h6 id="odoo.models.Model.with_user"><code>Model.with_user(<em>user</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5022" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return a new version of this recordset attached to the given user, in
non-superuser mode, unless <code >user</code> is the superuser (by convention, the
superuser is always in superuser mode.)</p></section><section class="code-method"><h6 id="odoo.models.Model.with_env"><code>Model.with_env(<em>env</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L4976" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return a new version of this recordset attached to the provided environment.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >env</strong> (<code class="xref py-class py">Environment</code>) – </div></div></div><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >The new environment will not benefit from the current
environment’s data cache, so later data access may incur extra
delays while re-fetching from the database.
The returned recordset has the same prefetch object as <code >self</code>.</p></div></section><section class="code-method"><h6 id="odoo.models.Model.sudo"><code>Model.sudo([<em>flag=True</em>])<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L4990" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Returns a new version of this recordset with superuser mode enabled or
disabled, depending on <code >flag</code>. The superuser mode does not change the
current user, and simply bypasses access rights checks.</p><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >Using <code >sudo</code> could cause data access to cross the
boundaries of record rules, possibly mixing records that
are meant to be isolated (e.g. records from different
companies in multi-company environments).</p><p >It may lead to un-intuitive results in methods which select one
record among many - for example getting the default company, or
selecting a Bill of Materials.</p></div><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >Because the record rules and access control will have to be
re-evaluated, the new recordset will not benefit from the current
environment’s data cache, so later data access may incur extra
delays while re-fetching from the database.
The returned recordset has the same prefetch object as <code >self</code>.</p></div></section></section><section id="sql-execution"><i id="reference-orm-sql"></i><h3 >SQL Execution</h3><p >The <code class="py-attr xref py">cr</code> attribute on environments is the
cursor for the current database transaction and allows executing SQL directly,
either for queries which are difficult to express using the ORM (e.g. complex
joins) or for performance reasons:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;some_sql&quot;</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">,</span> <span class="n">param3</span><span class="p">)</span>
</pre></div>
</div>
<p >Because models use the same cursor and the <code class="xref py-class py">Environment</code>
holds various caches, these caches must be invalidated when <em >altering</em> the
database in raw SQL, or further uses of models may become incoherent. It is
necessary to clear caches when using <code >CREATE</code>, <code >UPDATE</code> or <code >DELETE</code> in
SQL, but not <code >SELECT</code> (which simply reads the database).</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >Clearing caches can be performed using the
<a href="#odoo.models.Model.invalidate_cache" title="odoo.models.Model.invalidate_cache" class="reference alert-link internal"><code class="py-meth xref py">invalidate_cache()</code></a> method.</p></div><section class="code-method"><h6 id="odoo.models.Model.invalidate_cache"><code>Model.invalidate_cache(<em>fnames=None</em>, <em>ids=None</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5625" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Invalidate the record caches after some records have been modified.
If both <code >fnames</code> and <code >ids</code> are <code >None</code>, the whole cache is cleared.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >fnames</strong> – the list of modified fields, or <code >None</code> for all fields</li><li ><strong >ids</strong> – the list of modified record ids, or <code >None</code> for all</li></ul></div></div></div></section><div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >Executing raw SQL bypasses the ORM, and by consequent, Odoo security rules.
Please make sure your queries are sanitized when using user input and prefer using
ORM utilities if you don’t really need to use SQL queries.</p></div></section><section id="common-orm-methods"><i id="reference-orm-models-crud"></i><h2 >Common ORM methods</h2></section><section id="create-update"><h3 >Create/update</h3><section class="code-method"><h6 id="odoo.models.Model.create"><code>Model.create(<em>vals_list</em>) → records<a href="https://github.com/odoo/odoo/blob/13.0/doc/&lt;decorator-gen-3&gt;#L3621" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Creates new records for the model.</p><p >The new records are initialized using the values from the list of dicts
<code >vals_list</code>, and if necessary those from <a href="#odoo.models.Model.default_get" title="odoo.models.Model.default_get" class="reference alert-link internal"><code class="py-meth xref py">default_get()</code></a>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >vals_list</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link"><code >list</code></a>) – <p >values for the model’s fields, as a list of dictionaries:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;field_name&#39;</span><span class="p">:</span> <span class="n">field_value</span><span class="p">,</span> <span class="o">...</span><span class="p">},</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p >For backward compatibility, <code >vals_list</code> may be a dictionary.
It is treated as a singleton list <code >[vals]</code>, and a single record
is returned.</p><p >see <a href="#odoo.models.Model.write" title="odoo.models.Model.write" class="reference alert-link internal"><code class="py-meth xref py">write()</code></a> for details</p></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">the created records</div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><ul ><li ><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="reference alert-link internal"><strong >AccessError</strong></a> – <ul ><li >if user has no create rights on the requested object</li><li >if user tries to bypass access rules for create on the requested object</li></ul></li><li ><a href="#odoo.exceptions.ValidationError" title="odoo.exceptions.ValidationError" class="reference alert-link internal"><strong >ValidationError</strong></a> – if user tries to enter invalid value for a field that is not in selection</li><li ><a href="#odoo.exceptions.UserError" title="odoo.exceptions.UserError" class="reference alert-link internal"><strong >UserError</strong></a> – if a loop would be created in a hierarchy of objects a result of the operation (such as setting an object as its own parent)</li></ul></div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.copy"><code>Model.copy(<em>default=None</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L4524" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Duplicate record <code >self</code> updating it with default values</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >default</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="reference external alert-link"><code >dict</code></a>) – dictionary of field values to override in the
original values of the copied record, e.g: <code >{'field_name': overridden_value, ...}</code></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">new record</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.default_get"><code>Model.default_get(<em>fields</em>) → default_values<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1161" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return default values for the fields in <code >fields_list</code>. Default
values are determined by the context, user defaults, and the model
itself.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >fields_list</strong> – a list of field names</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">a dictionary mapping each field name to its corresponding
default value, if it has one.</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.name_create"><code>Model.name_create(<em>name</em>) → record<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1646" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Create a new record by calling <a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="reference alert-link internal"><code class="py-meth xref py">create()</code></a> with only one value
provided: the display name of the new record.</p><p >The new record will be initialized with any default values
applicable to this model, or provided through the context. The usual
behavior of <a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="reference alert-link internal"><code class="py-meth xref py">create()</code></a> applies.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >name</strong> – display name of the record to create</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(в Python v3.8)" class="reference external alert-link">tuple</a></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">the <a href="#odoo.models.Model.name_get" title="odoo.models.Model.name_get" class="reference alert-link internal"><code class="py-meth xref py">name_get()</code></a> pair value of the created record</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.write"><code>Model.write(<em>vals</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L3371" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Updates all records in the current set with the provided values.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >vals</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="reference external alert-link"><code >dict</code></a>) – <p >fields to update and the value to set on them e.g:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="s2">&quot;Qux&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p >will set the field <code >foo</code> to <code >1</code> and the field <code >bar</code> to
<code >&quot;Qux&quot;</code> if those are valid (otherwise it will trigger an error).</p></div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><ul ><li ><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="reference alert-link internal"><strong >AccessError</strong></a> – <ul ><li >if user has no write rights on the requested object</li><li >if user tries to bypass access rules for write on the requested object</li></ul></li><li ><a href="#odoo.exceptions.ValidationError" title="odoo.exceptions.ValidationError" class="reference alert-link internal"><strong >ValidationError</strong></a> – if user tries to enter invalid value for a field that is not in selection</li><li ><a href="#odoo.exceptions.UserError" title="odoo.exceptions.UserError" class="reference alert-link internal"><strong >UserError</strong></a> – if a loop would be created in a hierarchy of objects a result of the operation (such as setting an object as its own parent)</li></ul></div></div></div><ul ><li >For numeric fields (<a href="#odoo.fields.Integer" title="odoo.fields.Integer" class="reference alert-link internal"><code class="xref py-class py">Integer</code></a>,
<a href="#odoo.fields.Float" title="odoo.fields.Float" class="reference alert-link internal"><code class="xref py-class py">Float</code></a>) the value should be of the
corresponding type</li><li >For <a href="#odoo.fields.Boolean" title="odoo.fields.Boolean" class="reference alert-link internal"><code class="xref py-class py">Boolean</code></a>, the value should be a
<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a></li><li >For <a href="#odoo.fields.Selection" title="odoo.fields.Selection" class="reference alert-link internal"><code class="xref py-class py">Selection</code></a>, the value should match the
selection values (generally <a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>, sometimes
<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a>)</li><li >For <a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="reference alert-link internal"><code class="xref py-class py">Many2one</code></a>, the value should be the
database identifier of the record to set</li><li ><p >Other non-relational fields use a string for value</p><div role="alert" class="alert-danger alert"><h3 class="alert-title">Опасно</h3><p >for historical and compatibility reasons,
<a href="#odoo.fields.Date" title="odoo.fields.Date" class="reference alert-link internal"><code class="xref py-class py">Date</code></a> and
<a href="#odoo.fields.Datetime" title="odoo.fields.Datetime" class="reference alert-link internal"><code class="xref py-class py">Datetime</code></a> fields use strings as values
(written and read) rather than <a href="https://docs.python.org/3/library/datetime.html#datetime.date" title="(в Python v3.8)" class="reference external alert-link"><code class="xref py-class py">date</code></a> or
<a href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(в Python v3.8)" class="reference external alert-link"><code class="xref py-class py">datetime</code></a>. These date strings are
UTC-only and formatted according to
<code class="xref py py-const">odoo.tools.misc.DEFAULT_SERVER_DATE_FORMAT</code> and
<code class="xref py py-const">odoo.tools.misc.DEFAULT_SERVER_DATETIME_FORMAT</code></p></div></li><li ><p id="openerp-models-relationals-format"><a href="#odoo.fields.One2many" title="odoo.fields.One2many" class="reference alert-link internal"><code class="xref py-class py">One2many</code></a> and
<a href="#odoo.fields.Many2many" title="odoo.fields.Many2many" class="reference alert-link internal"><code class="xref py-class py">Many2many</code></a> use a special «commands» format to
manipulate the set of records stored in/associated with the field.</p><p >This format is a list of triplets executed sequentially, where each
triplet is a command to execute on the set of records. Not all
commands apply in all situations. Possible commands are:</p><dl ><dt ><code >(0, 0, values)</code></dt><dd >adds a new record created from the provided <code >value</code> dict.</dd><dt ><code >(1, id, values)</code></dt><dd >updates an existing record of id <code >id</code> with the values in
<code >values</code>. Can not be used in <a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="reference alert-link internal"><code class="py-meth xref py">create()</code></a>.</dd><dt ><code >(2, id, 0)</code></dt><dd >removes the record of id <code >id</code> from the set, then deletes it
(from the database). Can not be used in <a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="reference alert-link internal"><code class="py-meth xref py">create()</code></a>.</dd><dt ><code >(3, id, 0)</code></dt><dd >removes the record of id <code >id</code> from the set, but does not
delete it. Can not be used in
<a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="reference alert-link internal"><code class="py-meth xref py">create()</code></a>.</dd><dt ><code >(4, id, 0)</code></dt><dd >adds an existing record of id <code >id</code> to the set.</dd><dt ><code >(5, 0, 0)</code></dt><dd >removes all records from the set, equivalent to using the
command <code >3</code> on every record explicitly. Can not be used in
<a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="reference alert-link internal"><code class="py-meth xref py">create()</code></a>.</dd><dt ><code >(6, 0, ids)</code></dt><dd >replaces all existing records in the set by the <code >ids</code> list,
equivalent to using the command <code >5</code> followed by a command
<code >4</code> for each <code >id</code> in <code >ids</code>.</dd></dl></li></ul></section><section class="code-method"><h6 id="odoo.models.Model.flush"><code>Model.flush(<em>fnames=None</em>, <em>records=None</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5337" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Process all the pending recomputations (or at least the given field
names <code >fnames</code> if present) and flush the pending updates to the
database.</p></section></section><section id="search-read"><h3 >Search/Read</h3><section class="code-method"><h6 id="odoo.models.Model.browse"><code>Model.browse([<em>ids</em>]) → records<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L4922" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Returns a recordset for the ids provided as parameter in the current
environment.</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span>
<span class="n">res</span><span class="o">.</span><span class="n">partner</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >ids</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a><code > or </code><a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link"><code >list</code></a><code >(</code><a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a><code >) or </code><a href="https://docs.python.org/3/library/constants.html#None" title="(в Python v3.8)" class="reference external alert-link"><code >None</code></a>) – id(s)</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">recordset</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.search"><code>Model.search(<em>args[, offset=0][, limit=None][, order=None][, count=False]</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1581" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Searches for records based on the <code >args</code>
<a href="#reference-orm-domains" class="reference alert-link internal"><span class="std-ref std">search domain</span></a>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >args</strong> – <a href="#reference-orm-domains" class="reference alert-link internal"><span class="std-ref std">A search domain</span></a>. Use an empty
list to match all records.</li><li ><strong >offset</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a>) – number of results to ignore (default: none)</li><li ><strong >limit</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a>) – maximum number of records to return (default: all)</li><li ><strong >order</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – sort string</li><li ><strong >count</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – if True, only counts and returns the number of matching records (default: False)</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">at most <code >limit</code> records matching the search criteria</div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="reference alert-link internal"><strong >AccessError</strong></a> – <ul ><li >if user tries to bypass access rules for read on the requested object.</li></ul></div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.search_count"><code>Model.search_count(<em>args</em>) → int<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1571" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Returns the number of records in the current model matching <a href="#reference-orm-domains" class="reference alert-link internal"><span class="std-ref std">the
provided domain</span></a>.</p></section><section class="code-method"><h6 id="odoo.models.Model.name_search"><code>Model.name_search(<em>name=''</em>, <em>args=None</em>, <em>operator='ilike'</em>, <em>limit=100</em>) → records<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1668" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Search for records that have a display name matching the given
<code >name</code> pattern when compared with the given <code >operator</code>, while also
matching the optional search domain (<code >args</code>).</p><p >This is used for example to provide suggestions based on a partial
value for a relational field. Sometimes be seen as the inverse
function of <a href="#odoo.models.Model.name_get" title="odoo.models.Model.name_get" class="reference alert-link internal"><code class="py-meth xref py">name_get()</code></a>, but it is not guaranteed to be.</p><p >This method is equivalent to calling <a href="#odoo.models.Model.search" title="odoo.models.Model.search" class="reference alert-link internal"><code class="py-meth xref py">search()</code></a> with a search
domain based on <code >display_name</code> and then <a href="#odoo.models.Model.name_get" title="odoo.models.Model.name_get" class="reference alert-link internal"><code class="py-meth xref py">name_get()</code></a> on the
result of the search.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >name</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – the name pattern to match</li><li ><strong >args</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link"><code >list</code></a>) – optional search domain (see <a href="#odoo.models.Model.search" title="odoo.models.Model.search" class="reference alert-link internal"><code class="py-meth xref py">search()</code></a> for
syntax), specifying further restrictions</li><li ><strong >operator</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – domain operator for matching <code >name</code>, such as
<code >'like'</code> or <code >'='</code>.</li><li ><strong >limit</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a>) – optional max number of records to return</li></ul></div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link">list</a></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">list of pairs <code >(id, text_repr)</code> for all matching records.</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.read"><code>Model.read([<em>fields</em>])<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L2860" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Reads the requested fields for the records in <code >self</code>, low-level/RPC
method. In Python code, prefer <a href="#odoo.models.Model.browse" title="odoo.models.Model.browse" class="reference alert-link internal"><code class="py-meth xref py">browse()</code></a>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >fields</strong> – list of field names to return (default is all fields)</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">a list of dictionaries mapping field names to their values,
with one dictionary per record</div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="reference alert-link internal"><strong >AccessError</strong></a> – if user has no read rights on some of the given
records</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.read_group"><code>Model.read_group(<em>domain</em>, <em>fields</em>, <em>groupby</em>, <em>offset=0</em>, <em>limit=None</em>, <em>orderby=False</em>, <em>lazy=True</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L2088" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Get the list of records in list view grouped by the given <code >groupby</code> fields.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >domain</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link"><code >list</code></a>) – <a href="#reference-orm-domains" class="reference alert-link internal"><span class="std-ref std">A search domain</span></a>. Use an empty
list to match all records.</li><li ><strong >fields</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link"><code >list</code></a>) – list of fields present in the list view specified on the object.
Each element is either „field“ (field name, using the default aggregation),
or „field:agg“ (aggregate field with aggregation function „agg“),
or „name:agg(field)“ (aggregate field with „agg“ and return it as „name“).
The possible aggregation functions are the ones provided by PostgreSQL
(https://www.postgresql.org/docs/current/static/functions-aggregate.html)
and „count_distinct“, with the expected meaning.</li><li ><strong >groupby</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link"><code >list</code></a>) – list of groupby descriptions by which the records will be grouped.  
A groupby description is either a field (then it will be grouped by that field)
or a string „field:groupby_function“.  Right now, the only functions supported
are „day“, „week“, „month“, „quarter“ or „year“, and they only make sense for 
date/datetime fields.</li><li ><strong >offset</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a>) – optional number of records to skip</li><li ><strong >limit</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a>) – optional max number of records to return</li><li ><strong >orderby</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link"><code >list</code></a>) – optional <code >order by</code> specification, for
overriding the natural sort ordering of the
groups, see also <code class="py-meth xref py">search()</code>
(supported only for many2one fields currently)</li><li ><strong >lazy</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – if true, the results are only grouped by the first groupby and the 
remaining groupbys are put in the __context key.  If false, all the groupbys are
done in one call.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body"><p >list of dictionaries(one dictionary for each record) containing:</p><ul ><li >the values of fields grouped by the fields in <code >groupby</code> argument</li><li >__domain: list of tuples specifying the search criteria</li><li >__context: dictionary with argument like <code >groupby</code></li></ul></div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">[{„field_name_1“: value, ..]</div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="reference alert-link internal"><strong >AccessError</strong></a> – <ul ><li >if user has no read rights on the requested object</li><li >if user tries to bypass access rules for read on the requested object</li></ul></div></div></div></section></section><section id="fields-views"><h4 >Fields/Views</h4><section class="code-method"><h6 id="odoo.models.Model.fields_get"><code>Model.fields_get(<em>[fields][, attributes]</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L2738" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the definition of each field.</p><p >The returned value is a dictionary (indexed by field name) of
dictionaries. The _inherits’d fields are included. The string, help,
and selection (if present) attributes are translated.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >allfields</strong> – list of fields to document, all if empty or not provided</li><li ><strong >attributes</strong> – list of description attributes to return for each field, all if empty or not provided</li></ul></div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.fields_view_get"><code>Model.fields_view_get([<em>view_id | view_type='form'</em>])<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1484" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Get the detailed composition of the requested view like fields, model, view architecture</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >view_id</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a>) – id of the view or None</li><li ><strong >view_type</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – type of the view to return if view_id is None („form“, „tree“, …)</li><li ><strong >toolbar</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – true to include contextual actions</li><li ><strong >submenu</strong> – deprecated</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">composition of the requested view (including inherited views and extensions)</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="reference external alert-link">dict</a></div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><ul ><li ><a href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(в Python v3.8)" class="reference external alert-link"><strong >AttributeError</strong></a> – <ul ><li >if the inherited view has unknown position to work with other than „before“, „after“, „inside“, „replace“</li><li >if some tag other than „position“ is found in parent view</li></ul></li><li ><strong >Invalid ArchitectureError</strong> – if there is view type other than form, tree, calendar, search etc defined on the structure</li></ul></div></div></div></section></section><section id="search-domains"><i id="reference-orm-domains"></i><h4 >Search domains</h4><p >A domain is a list of criteria, each criterion being a triple (either a
<code >list</code> or a <code >tuple</code>) of <code >(field_name, operator, value)</code> where:</p><ul ><li ><dl ><dt ><code >field_name</code> (<code >str</code>)</dt><dd >a field name of the current model, or a relationship traversal through
a <a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="reference internal"><code class="xref py-class py">Many2one</code></a> using dot-notation e.g. <code >'street'</code>
or <code >'partner_id.country'</code></dd></dl></li><li ><dl ><dt ><code >operator</code> (<code >str</code>)</dt><dd ><p >an operator used to compare the <code >field_name</code> with the <code >value</code>. Valid
operators are:</p><dl ><dt ><code >=</code></dt><dd >equals to</dd><dt ><code >!=</code></dt><dd >not equals to</dd><dt ><code >&gt;</code></dt><dd >greater than</dd><dt ><code >&gt;=</code></dt><dd >greater than or equal to</dd><dt ><code >&lt;</code></dt><dd >less than</dd><dt ><code >&lt;=</code></dt><dd >less than or equal to</dd><dt ><code >=?</code></dt><dd >unset or equals to (returns true if <code >value</code> is either <code >None</code> or
<code >False</code>, otherwise behaves like <code >=</code>)</dd><dt ><code >=like</code></dt><dd >matches <code >field_name</code> against the <code >value</code> pattern. An underscore
<code >_</code> in the pattern stands for (matches) any single character; a
percent sign <code >%</code> matches any string of zero or more characters.</dd><dt ><code >like</code></dt><dd >matches <code >field_name</code> against the <code >%value%</code> pattern. Similar to
<code >=like</code> but wraps <code >value</code> with „%“ before matching</dd><dt ><code >not like</code></dt><dd >doesn’t match against the <code >%value%</code> pattern</dd><dt ><code >ilike</code></dt><dd >case insensitive <code >like</code></dd><dt ><code >not ilike</code></dt><dd >case insensitive <code >not like</code></dd><dt ><code >=ilike</code></dt><dd >case insensitive <code >=like</code></dd><dt ><code >in</code></dt><dd >is equal to any of the items from <code >value</code>, <code >value</code> should be a
list of items</dd><dt ><code >not in</code></dt><dd >is unequal to all of the items from <code >value</code></dd><dt ><code >child_of</code></dt><dd ><p >is a child (descendant) of a <code >value</code> record (value can be either
one item or a list of items).</p><p >Takes the semantics of the model into account (i.e following the
relationship field named by
<code class="py-attr xref py">_parent_name</code>).</p></dd><dt ><code >parent_of</code></dt><dd ><p >is a parent (ascendant) of a <code >value</code> record (value can be either
one item or a list of items).</p><p >Takes the semantics of the model into account (i.e following the
relationship field named by
<code class="py-attr xref py">_parent_name</code>).</p></dd></dl></dd></dl></li><li ><dl ><dt ><code >value</code></dt><dd >variable type, must be comparable (through <code >operator</code>) to the named
field.</dd></dl></li></ul><p >Domain criteria can be combined using logical operators in <em >prefix</em> form:</p><dl ><dt ><code >'&amp;'</code></dt><dd >logical <em >AND</em>, default operation to combine criteria following one
another. Arity 2 (uses the next 2 criteria or combinations).</dd><dt ><code >'|'</code></dt><dd >logical <em >OR</em>, arity 2.</dd><dt ><code >'!'</code></dt><dd ><p >logical <em >NOT</em>, arity 1.</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >Mostly to negate combinations of criteria
Individual criterion generally have a negative form (e.g. <code >=</code> -&gt;
<code >!=</code>, <code >&lt;</code> -&gt; <code >&gt;=</code>) which is simpler than negating the positive.</p></div></dd></dl><div role="alert" class="alert admonition-example"><h3 class="alert-title">Example</h3><p >To search for partners named <em >ABC</em>, from belgium or germany, whose language
is not english:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;ABC&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;language.code&#39;</span><span class="p">,</span><span class="s1">&#39;!=&#39;</span><span class="p">,</span><span class="s1">&#39;en_US&#39;</span><span class="p">),</span>
 <span class="s1">&#39;|&#39;</span><span class="p">,(</span><span class="s1">&#39;country_id.code&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;be&#39;</span><span class="p">),</span>
     <span class="p">(</span><span class="s1">&#39;country_id.code&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;de&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p >This domain is interpreted as:</p><div class="highlight-text"><div class="highlight"><pre><span></span>    (name is &#39;ABC&#39;)
AND (language is NOT english)
AND (country is Belgium OR Germany)
</pre></div>
</div>
</div></section><section id="unlink"><h3 >Unlink</h3><section class="code-method"><h6 id="odoo.models.Model.unlink"><code>Model.unlink()<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L3279" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Deletes the records of the current set</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><ul ><li ><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="reference alert-link internal"><strong >AccessError</strong></a> – <ul ><li >if user has no unlink rights on the requested object</li><li >if user tries to bypass access rules for unlink on the requested object</li></ul></li><li ><a href="#odoo.exceptions.UserError" title="odoo.exceptions.UserError" class="reference alert-link internal"><strong >UserError</strong></a> – if the record is default property for other records</li></ul></div></div></div></section></section><section id="record-set-information"><i id="reference-orm-records-info"></i><h3 >Record(set) information</h3><section class="code-attribute"><h6 id="odoo.models.Model.ids"><code>Model.ids</code></h6><p >Return the list of actual record ids corresponding to <code >self</code>.</p></section><section class="code-attribute"><h6 id="odoo.models.env"><code>odoo.models.env</code></h6><p >Returns the environment of the given recordset.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Type</div><div class="code-field-body"><code class="xref py-class py">Environment</code></div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.exists"><code>Model.exists() → records<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L4542" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Returns the subset of records in <code >self</code> that exist, and marks deleted
records as such in cache. It can be used as a test on records:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p >By convention, new records are returned as existing.</p></section><section class="code-method"><h6 id="odoo.models.Model.ensure_one"><code>Model.ensure_one()<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L4963" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Verify that the current recorset holds a single record.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><strong >odoo.exceptions.ValueError</strong> – <code >len(self) != 1</code></div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.name_get"><code>Model.name_get() → [(id, name), ...]<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1625" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Returns a textual representation for the records in <code >self</code>.
By default this is the value of the <code >display_name</code> field.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">list of pairs <code >(id, text_repr)</code> for each records</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link">list</a>(<a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(в Python v3.8)" class="reference external alert-link">tuple</a>)</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.get_metadata"><code>Model.get_metadata()<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L3044" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return some metadata about the given records.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">list of ownership dictionaries for each requested record</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><p >list of dictionaries with the following keys:</p><ul ><li >id: object id</li><li >create_uid: user who created the record</li><li >create_date: date when the record was created</li><li >write_uid: last user who changed the record</li><li >write_date: date of the last change to the record</li><li >xmlid: XML ID to use to refer to this record (if there is one), in format <code >module.name</code></li><li >noupdate: A boolean telling if the record will be updated or not</li></ul></div></div></div></section></section><section id="operations"><i id="reference-orm-records-operations"></i><h3 >Operations</h3><p >Recordsets are immutable, but sets of the same model can be combined using
various set operations, returning new recordsets.</p><ul ><li ><code >record in set</code> returns whether <code >record</code> (which must be a 1-element
recordset) is present in <code >set</code>. <code >record not in set</code> is the inverse
operation</li><li ><code >set1 &lt;= set2</code> and <code >set1 &lt; set2</code> return whether <code >set1</code> is a subset
of <code >set2</code> (resp. strict)</li><li ><code >set1 &gt;= set2</code> and <code >set1 &gt; set2</code> return whether <code >set1</code> is a superset
of <code >set2</code> (resp. strict)</li><li ><code >set1 | set2</code> returns the union of the two recordsets, a new recordset
containing all records present in either source</li><li ><code >set1 &amp; set2</code> returns the intersection of two recordsets, a new recordset
containing only records present in both sources</li><li ><code >set1 - set2</code> returns a new recordset containing only records of <code >set1</code>
which are <em >not</em> in <code >set2</code></li></ul><p >Recordsets are iterable so the usual Python tools are available for
transformation (<a href="https://docs.python.org/3/library/functions.html#map" title="(в Python v3.8)" class="reference external"><code >map()</code></a>, <a href="https://docs.python.org/3/library/functions.html#sorted" title="(в Python v3.8)" class="reference external"><code >sorted()</code></a>,
<code class="xref py-func py">itertools.ifilter</code>, …) however these return either a
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external"><code >list</code></a> or an <a href="https://docs.python.org/3/glossary.html#term-iterator" title="(в Python v3.8)" class="reference external"><span >iterator</span></a>, removing the ability to
call methods on their result, or to use set operations.</p><p >Recordsets therefore provide the following operations returning recordsets themselves
(when possible):</p></section><section id="filter"><h4 >Filter</h4><section class="code-method"><h6 id="odoo.models.Model.filtered"><code>Model.filtered(<em>func</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5194" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the records in <code >self</code> satisfying <code >func</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >func</strong> (<code >callable</code><code > or </code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – a function or a dot-separated sequence of field names</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">recordset of records satisfying func, may be empty.</div></div></div><div class="highlight-python3"><div class="highlight"><pre><span></span><span class="c1"># only keep records whose company is the current user&#39;s</span>
<span class="n">records</span><span class="o">.</span><span class="n">filtered</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">company_id</span> <span class="o">==</span> <span class="n">user</span><span class="o">.</span><span class="n">company_id</span><span class="p">)</span>

<span class="c1"># only keep records whose partner is a company</span>
<span class="n">records</span><span class="o">.</span><span class="n">filtered</span><span class="p">(</span><span class="s2">&quot;partner_id.is_company&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section><section class="code-method"><h6 id="odoo.models.Model.filtered_domain"><code>Model.filtered_domain(<em>domain</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5214" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section></section><section id="map"><h4 >Map</h4><section class="code-method"><h6 id="odoo.models.Model.mapped"><code>Model.mapped(<em>func</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5142" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Apply <code >func</code> on all records in <code >self</code>, and return the result as a
list or a recordset (if <code >func</code> return recordsets). In the latter
case, the order of the returned recordset is arbitrary.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >func</strong> (<code >callable</code><code > or </code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – a function or a dot-separated sequence of field names</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">self if func is falsy, result of func applied to all <code >self</code> records.</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="reference external alert-link">list</a> or recordset</div></div></div><div class="highlight-python3"><div class="highlight"><pre><span></span><span class="c1"># returns a list of summing two fields for each record in the set</span>
<span class="n">records</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">field1</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">field2</span><span class="p">)</span>
</pre></div>
</div>
<p >The provided function can be a string to get field values:</p><div class="highlight-python3"><div class="highlight"><pre><span></span><span class="c1"># returns a list of names</span>
<span class="n">records</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>

<span class="c1"># returns a recordset of partners</span>
<span class="n">record</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;partner_id&#39;</span><span class="p">)</span>

<span class="c1"># returns the union of all partner banks, with duplicates removed</span>
<span class="n">record</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;partner_id.bank_ids&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section></section><section id="sort"><h4 >Sort</h4><section class="code-method"><h6 id="odoo.models.Model.sorted"><code>Model.sorted(<em>key=None</em>, <em>reverse=False</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5310" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Return the recordset <code >self</code> ordered by <code >key</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >key</strong> (<code >callable</code><code > or </code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a><code > or </code><a href="https://docs.python.org/3/library/constants.html#None" title="(в Python v3.8)" class="reference external alert-link"><code >None</code></a>) – either a function of one argument that returns a
comparison key for each record, or a field name, or <code >None</code>, in
which case records are ordered according the default model’s order</li><li ><strong >reverse</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="reference external alert-link"><code >bool</code></a>) – if <code >True</code>, return the result in reverse order</li></ul></div></div></div><div class="highlight-python3"><div class="highlight"><pre><span></span><span class="c1"># sort records by name</span>
<span class="n">records</span><span class="o">.</span><span class="n">sorted</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</section></section><section id="inheritance-and-extension"><i id="reference-orm-inheritance"></i><h2 >Inheritance and extension</h2><p >Odoo provides three different mechanisms to extend models in a modular way:</p><ul ><li >creating a new model from an existing one, adding new information to the
copy but leaving the original module as-is</li><li >extending models defined in other modules in-place, replacing the previous
version</li><li >delegating some of the model’s fields to records it contains</li></ul><img src="../_images/inheritance_methods1.png" class="center-block img-responsive"></section><section id="classical-inheritance"><h3 >Classical inheritance</h3><p >When using the <code class="py-attr xref py">_inherit</code> and
<code class="py-attr xref py">_name</code> attributes together, Odoo creates a new
model using the existing one (provided via
<code class="py-attr xref py">_inherit</code>) as a base. The new model gets all the
fields, methods and meta-information (defaults &amp; al) from its base.</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Inheritance0</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;inheritance.0&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Inheritance Zero&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s2">&quot;model 0&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;This is </span><span class="si">{}</span><span class="s2"> record </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Inheritance1</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;inheritance.1&#39;</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;inheritance.0&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Inheritance One&#39;</span>

    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s2">&quot;model 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >and using them:</p><div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">a</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;inheritance.0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">})</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;inheritance.1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;B&#39;</span><span class="p">})</span>
            <span class="n">a</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
            <span class="n">b</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
</pre></div>
</div>
<p >will yield:</p><div class="highlight-text"><div class="highlight"><pre><span></span>            &quot;This is model 0 record A&quot;
            &quot;This is model 1 record B&quot;
</pre></div>
</div>
<p >the second model has inherited from the first model’s <code >check</code> method and its
<code >name</code> field, but overridden the <code >call</code> method, as when using standard
<a href="https://docs.python.org/3/tutorial/classes.html#tut-inheritance" title="(в Python v3.8)" class="reference external"><span class="std-ref xref std">Python inheritance</span></a>.</p></section><section id="extension"><h3 >Extension</h3><p >When using <code class="py-attr xref py">_inherit</code> but leaving out
<code class="py-attr xref py">_name</code>, the new model replaces the existing one,
essentially extending it in-place. This is useful to add new fields or methods
to existing models (created in other modules), or to customize or reconfigure
them (e.g. to change their default sort order):</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Extension0</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;extension.0&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Extension zero&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Extension1</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;extension.0&#39;</span>

    <span class="n">description</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;Extended&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">record</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;extension.0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({})</span>
        <span class="n">record</span><span class="o">.</span><span class="n">read</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p >will yield:</p><div class="highlight-text"><div class="highlight"><pre><span></span>        {&#39;name&#39;: &quot;A&quot;, &#39;description&#39;: &quot;Extended&quot;}
</pre></div>
</div>
<div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >it will also yield the various <a href="#reference-fields-automatic" class="reference alert-link internal"><span class="std-ref std">automatic fields</span></a> unless they’ve been disabled</p></div></section><section id="delegation"><h3 >Delegation</h3><p >The third inheritance mechanism provides more flexibility (it can be altered
at runtime) but less power: using the <code class="py-attr xref py">_inherits</code>
a model <em >delegates</em> the lookup of any field not found on the current model
to «children» models. The delegation is performed via
<a href="#odoo.fields.Reference" title="odoo.fields.Reference" class="reference internal"><code class="xref py-class py">Reference</code></a> fields automatically set up on the parent
model.</p><p >The main difference is in the meaning. When using Delegation, the model
<strong >has one</strong> instead of <strong >is one</strong>, turning the relationship in a composition
instead of inheritance:</p><div class="highlight-python"><div class="highlight"><pre><span></span>
<span class="k">class</span> <span class="nc">Screen</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;delegation.screen&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Screen&#39;</span>

    <span class="n">size</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Screen Size in inches&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Keyboard</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;delegation.keyboard&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Keyboard&#39;</span>

    <span class="n">layout</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Layout&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Laptop</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;delegation.laptop&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Laptop&#39;</span>

    <span class="n">_inherits</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;delegation.screen&#39;</span><span class="p">:</span> <span class="s1">&#39;screen_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;delegation.keyboard&#39;</span><span class="p">:</span> <span class="s1">&#39;keyboard_id&#39;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Name&#39;</span><span class="p">)</span>
    <span class="n">maker</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Maker&#39;</span><span class="p">)</span>

    <span class="c1"># a Laptop has a screen</span>
    <span class="n">screen_id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Many2one</span><span class="p">(</span><span class="s1">&#39;delegation.screen&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ondelete</span><span class="o">=</span><span class="s2">&quot;cascade&quot;</span><span class="p">)</span>
    <span class="c1"># a Laptop has a keyboard</span>
    <span class="n">keyboard_id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Many2one</span><span class="p">(</span><span class="s1">&#39;delegation.keyboard&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ondelete</span><span class="o">=</span><span class="s2">&quot;cascade&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">record</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;delegation.laptop&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span>
            <span class="s1">&#39;screen_id&#39;</span><span class="p">:</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;delegation.screen&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mf">13.0</span><span class="p">})</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s1">&#39;keyboard_id&#39;</span><span class="p">:</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;delegation.keyboard&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;layout&#39;</span><span class="p">:</span> <span class="s1">&#39;QWERTY&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="p">})</span>
            <span class="n">record</span><span class="o">.</span><span class="n">size</span>
            <span class="n">record</span><span class="o">.</span><span class="n">layout</span>
</pre></div>
</div>
<p >will result in:</p><div class="highlight-text"><div class="highlight"><pre><span></span>            13.0
            &#39;QWERTY&#39;
</pre></div>
</div>
<p >and it’s possible to write directly on the delegated field:</p><div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">record</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mf">14.0</span><span class="p">})</span>
</pre></div>
</div>
<div role="alert" class="alert-warning alert"><h3 class="alert-title">Предупреждение</h3><p >when using delegation inheritance, methods are <em >not</em> inherited,
only fields</p></div></section><section id="fields-incremental-definition"><h3 >Fields Incremental Definition</h3><p >A field is defined as class attribute on a model class. If the model
is extended, one can also extend the field definition by redefining
a field with the same name and same type on the subclass.
In that case, the attributes of the field are taken from the parent class
and overridden by the ones given in subclasses.</p><p >For instance, the second class below only adds a tooltip on the field
<code >state</code>:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">First</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Selection</span><span class="p">([</span><span class="o">...</span><span class="p">],</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Second</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Blah blah blah&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section><section id="module-odoo.exceptions"><i id="error-management"></i><i id="reference-exceptions"></i><h2 >Error management</h2><p >The Odoo Exceptions module defines a few core exception types.</p><p >Those types are understood by the RPC layer.
Any other exception type bubbling until the RPC layer will be
treated as a „Server error“.</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >If you consider introducing new exceptions,
check out the <code class="py-mod xref py">odoo.addons.test_exceptions</code> module.</p></div><section class="code-exception"><h6 id="odoo.exceptions.AccessDenied"><code><em >exception </em>odoo.exceptions.AccessDenied(<em>message='Access denied'</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L61" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Login/password error.</p><div role="alert" class="alert-info alert"><h3 class="alert-title">Примечание</h3><p >No traceback.</p></div><div role="alert" class="alert admonition-example"><h3 class="alert-title">Example</h3><p >When you try to log with a wrong password.</p></div></section><section class="code-exception"><h6 id="odoo.exceptions.AccessError"><code><em >exception </em>odoo.exceptions.AccessError(<em>msg</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L80" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Access rights error.</p><div role="alert" class="alert admonition-example"><h3 class="alert-title">Example</h3><p >When you try to read a record that you are not allowed to.</p></div></section><section class="code-exception"><h6 id="odoo.exceptions.CacheMiss"><code><em >exception </em>odoo.exceptions.CacheMiss(<em>record</em>, <em>field</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L92" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Missing value(s) in cache.</p><div role="alert" class="alert admonition-example"><h3 class="alert-title">Example</h3><p >When you try to read a value in a flushed cache.</p></div></section><section class="code-exception"><h6 id="odoo.exceptions.MissingError"><code><em >exception </em>odoo.exceptions.MissingError(<em>msg</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L104" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Missing record(s).</p><div role="alert" class="alert admonition-example"><h3 class="alert-title">Example</h3><p >When you try to write on a deleted record.</p></div></section><section class="code-exception"><h6 id="odoo.exceptions.RedirectWarning"><code><em >exception </em>odoo.exceptions.RedirectWarning<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L47" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Warning with a possibility to redirect the user instead of simply
displaying the warning message.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >action_id</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="reference external alert-link"><code >int</code></a>) – id of the action where to perform the redirection</li><li ><strong >button_text</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="reference external alert-link"><code >str</code></a>) – text to put on the button that will trigger
the redirection.</li></ul></div></div></div></section><section class="code-exception"><h6 id="odoo.exceptions.UserError"><code><em >exception </em>odoo.exceptions.UserError(<em>msg</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L33" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Generic error managed by the client.</p><p >Typically when the user tries to do something that has no sense given the current
state of a record.</p></section><section class="code-exception"><h6 id="odoo.exceptions.ValidationError"><code><em >exception </em>odoo.exceptions.ValidationError(<em>msg</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L116" class="reference external alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Violation of python constraints.</p><div role="alert" class="alert admonition-example"><h3 class="alert-title">Example</h3><p >When you try to create a new user with a login which already exist in the db.</p></div></section></section>

          </article>
        </div>
        
        <div id="mask"></div>
      </main>
  </div>

  <div class="floating_action_container">
    <a id="floating_action" class="ripple" href="#">
      <i class="mdi-action-explore"></i>
    </a>
    <div id="floating_action_menu">
      <span class="bubble"></span>
      <ul class="list-group content">
        <li class="list-group-item ripple"><a>Cras justo odio</a></li>
        <li class="list-group-item ripple"><a>Dapibus ac facilisis in</a></li>
        <li class="list-group-item ripple"><a>Morbi leo risus</a></li>
        <li class="list-group-item ripple"><a>Porta ac consectetur ac</a></li>
        <li class="list-group-item ripple"><a>Vestibulum at eros</a></li>
      </ul>
    </div>
  </div>
  <footer>
    <div id="footer" class="container">
      <span class="o_logo o_logo_inverse center-block o_footer_logo"></span>
      <div class="row">
        <div class="col-sm-7 col-md-7 col-lg-6">
          <div class="row">
            <div class="col-xs-6 col-sm-4">
              <span class="menu_title">Community</span>
              <ul>
                <li><a href="https://github.com/odoo/odoo">Github</a></li>
                <li><a href="http://www.odoo.com/page/download">Download</a></li>
                <li class="divider"></li>
                <li><a href="http://runbot.odoo.com/runbot/repo/git-github-com-odoo-enterprise-7">Runbot</a></li>
                <li><a href="https://github.com/odoo/odoo/wiki/Translations">Translations</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/page/odoo-community">Mailing Lists</a></li>
                <li><a href="http://www.odoo.com/forum/help-1">Forum</a></li>
              </ul>
            </div>
            <div class="col-xs-6 col-sm-4">
              <span class="menu_title">Services</span>
              <ul>
                <li><a href="https://www.odoo.sh">Odoo Cloud Platform</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/help">Support</a></li>
                <li><a href="https://upgrade.odoo.com">Upgrade</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/partners">Find a partner</a></li>
                <li><a href="http://www.odoo.com/page/become-a-partner">Become a partner</a></li>
                <li class="divider"></li>
                <li><a href="http://training.odoo.com/courses/odoo-functional">Training Center</a></li>
                <li><a href="http://www.odoo.com/page/education-program">Education</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/page/security">Security</a></li>
              </ul>
            </div>
            <div class="col-xs-12 col-sm-4 mb64">
              <span class="menu_title">About us</span>
              <ul>
                <li><a href="http://www.odoo.com/page/about-us">Our company</a></li>
                <li><a href="http://www.odoo.com/page/contactus">Contact</a></li>
                <li class="divider" />
                <li><a href="http://www.odoo.com/event">Events</a></li>
                <li><a href="http://www.odoo.com/blog">Blog</a></li>
                <li><a href="http://www.odoo.com/blog/6">Customers</a></li>
                <li class="divider" />
                <li><a href="http://www.odoo.com/jobs">Jobs</a></li>
                <li class="divider" />
                <li><a href="http://www.odoo.com/page/legal">Legal</a> | <a href="http://www.odoo.com/privacy">Privacy</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-sm-5 col-md-4 col-md-offset-1 col-lg-5 col-lg-offset-1">
          <p>
            <small>
              Odoo is a suite of open source business apps that cover all your company needs: CRM, eCommerce, accounting, inventory, point of sale, project management, etc.
              <br/><br/>
              Odoo's unique value proposition is to be at the same time very easy to use and fully integrated.
            </small>
          </p>
        </div>
      </div>
    </div>
    <div class="o_footer_bottom">
      <div class="container">
        <a class="small" href="http://www.odoo.com/page/website-builder">Website made with <span class="o_logo o_logo_inverse o_logo_15"></span></a>
        <div class="social-links pull-right">
          <a href="http://www.odoo.com/web/about/facebook"><i class="fa fa-facebook"></i></a>
          <a href="http://www.odoo.com/web/about/twitter"><i class="fa fa-twitter"></i></a>
          <a href="http://www.odoo.com/web/about/linkedin"><i class="fa fa-linkedin"></i></a>
          <a href="mailto:info@odoo.com"><i class="fa fa-envelope"></i></a>
        </div>
      </div>
    </div>
  </footer>
  </body>
</html>